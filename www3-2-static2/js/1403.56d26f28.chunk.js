"use strict";(self.webpackChunkfamily_doc_app=self.webpackChunkfamily_doc_app||[]).push([[1403],{61403:(e,n,l)=>{l.r(n),l.d(n,{default:()=>b});var o=l(72791),d=l(90575),i=l(38217),t=l(52720),a=l(74332),s=l(41213),v=l(23853),r=l(57689),u=l(11087),p=l(3810),c=l(95070),m=l(1444),x=l(36638),h=l(88135),f=l(43360),g=l(69499),j=l(72426),D=l.n(j),_=l(59434),y=l(24278),N=l(92592),P=l(80184);function A(e){var n;return(0,P.jsxs)(h.Z,{show:e.show,onHide:e.onHide,centered:!0,size:"lg",backdrop:"static",children:[(0,P.jsx)(h.Z.Header,{closeButton:!0,children:(0,P.jsx)(h.Z.Title,{children:"Image Preview"})}),(0,P.jsx)(h.Z.Body,{children:(0,P.jsx)("div",{className:"py-2",children:(0,P.jsx)(N.Z,{src:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.imageUrl,alt:"Image Preview",className:"uploaded-img-layout"})})}),(0,P.jsx)(h.Z.Footer,{children:(0,P.jsx)(f.Z,{className:"float-end",style:{background:"#000071"},onClick:async()=>{try{const n=await fetch(e.data.imageUrl),l=n.headers.get("Content-Type");if(l&&l.startsWith("image/")){const l=await n.blob(),o=e.data.image.split(".").pop(),d=URL.createObjectURL(l),i=document.createElement("a");i.href=d,i.download="image.".concat(o),document.body.appendChild(i),i.click(),document.body.removeChild(i)}else console.error("Invalid or missing Content-Type header for the image")}catch(n){console.error("Error fetching or downloading the image",n)}},children:"Download Image"})})]})}function b(){var e,n,l,j,N,b,w,M,Y,S,k,I,Z,T,C,z,E,U,F,B,W,H,L,R,G,O,J;const Q=(0,o.useRef)(),V=(0,_.I0)(),q=JSON.parse(localStorage.getItem("family_doc_app")),K=(0,r.s0)(),[X,$]=(0,o.useState)(!1),[ee,ne]=(0,o.useState)(),[le,oe]=(0,o.useState)(null),[de,ie]=(0,o.useState)(!1),[te,ae]=(0,o.useState)(!1),[se,ve]=(0,o.useState)(null),{allAppointment:re}=(0,_.v9)((e=>e.appointment)),ue=null===re||void 0===re?void 0:re.map((e=>({appointmentId:null===e||void 0===e?void 0:e.appointmentId,doctorId:null===e||void 0===e?void 0:e.doctorId,doctorName:null===e||void 0===e?void 0:e.doctorName,patientName:null===e||void 0===e?void 0:e.patientName,vonageSessionId:null===e||void 0===e?void 0:e.vonageSessionId,statusId:null===e||void 0===e?void 0:e.statusId,status:null===e||void 0===e?void 0:e.status,imageUrl:null===e||void 0===e?void 0:e.imageUrl,scheduleId:null===e||void 0===e?void 0:e.scheduleId,appointmentDate:null===e||void 0===e?void 0:e.appointmentDate,patientId:null===e||void 0===e?void 0:e.patientId,appointmentStartTime:null===e||void 0===e?void 0:e.appointmentStartTime,appointmentEndTime:null===e||void 0===e?void 0:e.appointmentEndTime,reasonForAppoinment:null===e||void 0===e?void 0:e.reasonForAppoinment,image:null===e||void 0===e?void 0:e.image,start:null===e||void 0===e?void 0:e.appointmentDate.split("T")[0]})));console.log("events",ue),console.log("allAppointment",re);(0,o.useEffect)((()=>{if(se){var e,n,l,o;let d=D()(new Date),i=new Date("".concat(D()(null===se||void 0===se||null===(e=se._def)||void 0===e||null===(n=e.extendedProps)||void 0===n?void 0:n.appointmentDate).format("YYYY-MM-DD"),"T").concat(D()(null===se||void 0===se||null===(l=se._def)||void 0===l||null===(o=l.extendedProps)||void 0===o?void 0:o.appointmentStartTime,"hh:mm A").format("HH:mm:ss"))),t=D().duration(D()(i).diff(d)).asMinutes();ae(t<10&&t>-15)}else ae(!1)}),[se]);const pe=function(){var e,n;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date(null===se||void 0===se||null===(e=se._def)||void 0===e||null===(n=e.extendedProps)||void 0===n?void 0:n.appointmentDate),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return null===l||void 0===l?void 0:l.toLocaleDateString(o,{weekday:"long"})}();(0,o.useEffect)((()=>{const e={doctorId:null===q||void 0===q?void 0:q.userId,month:+D()(ee).format("M"),pageNo:0,isPagination:!1,size:0,statusId:"205"===le?205:"204"===le?204:"206"===le?206:"203"===le?203:"201"===le?201:null};V((0,y.Qe)(e))}),[V,ee,null===q||void 0===q?void 0:q.userId,le]);const ce=null===se||void 0===se||null===(e=se._def)||void 0===e||null===(n=e.extendedProps)||void 0===n?void 0:n.image,me=null===ce||void 0===ce?void 0:ce.split("_")[1];let xe,he;me&&me.includes(".pdf")?xe=me:he=me;return(0,P.jsx)(c.Z,{className:"custom-full-calendar",children:(0,P.jsxs)(c.Z.Body,{style:{borderRadius:"12px"},className:"fc-header-dropdown",children:[(0,P.jsxs)(m.Z,{children:[(0,P.jsx)(m.Z.Toggle,{variant:"secondary",id:"checkbox-dropdown",children:"Appointments"}),(0,P.jsx)(m.Z.Menu,{children:(0,P.jsx)(x.Z,{children:[{label:"Missed",value:205},{label:"Upcoming",value:204},{label:"Completed",value:206},{label:"Cancelled",value:203},{label:"Pending",value:201}].map((e=>(0,P.jsx)(x.Z.Check,{type:"checkbox",label:e.label,value:e.value,checked:null!==le&&le.includes(e.value),onChange:e=>oe(le===e.target.value?null:e.target.value)},e.value)))})})]}),(0,P.jsx)("div",{className:"appointment-calender",children:(0,P.jsx)(d.Z,{plugins:[i.Z,t.Z,a.ZP],initialView:"dayGridMonth",headerToolbar:{start:"dayGridMonth,timeGridWeek,timeGridDay",center:"prev,title,next",end:""},ref:Q,datesSet:()=>(e=>{var n,l,o;ne(null===e||void 0===e||null===(n=e.current)||void 0===n||null===(l=n.calendar)||void 0===l||null===(o=l.currentData)||void 0===o?void 0:o.currentDate)})(Q),weekends:!0,events:ue,eventContent:e=>{var n,l,o,d,i,t,a,s,v,r,u,p,c,m,x,h,f,g,j,_,y,N,A,b,w,M;return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)("div",{className:"appointment-slot-background",style:{backgroundColor:"Booked"===(null===e||void 0===e||null===(n=e.event)||void 0===n||null===(l=n._def)||void 0===l||null===(o=l.extendedProps)||void 0===o?void 0:o.status)&&(null===(d=D()(null===e||void 0===e||null===(i=e.event)||void 0===i||null===(t=i._def)||void 0===t||null===(a=t.extendedProps)||void 0===a?void 0:a.appointmentDate))||void 0===d?void 0:d.format("YYYY-MM-DD"))>=D()(new Date).format("YYYY-MM-DD")?"#2269F2":"Missed"===(null===e||void 0===e||null===(s=e.event)||void 0===s||null===(v=s._def)||void 0===v||null===(r=v.extendedProps)||void 0===r?void 0:r.status)?"#F26522":"#44BC19"},children:[(0,P.jsx)("b",{children:"".concat(null===e||void 0===e||null===(u=e.event)||void 0===u||null===(p=u._def)||void 0===p||null===(c=p.extendedProps)||void 0===c?void 0:c.appointmentStartTime," - ").concat(null===e||void 0===e||null===(m=e.event)||void 0===m||null===(x=m._def)||void 0===x||null===(h=x.extendedProps)||void 0===h?void 0:h.appointmentEndTime)}),(0,P.jsx)("p",{className:"m-0",children:"Booked"===(null===e||void 0===e||null===(f=e.event)||void 0===f||null===(g=f._def)||void 0===g||null===(j=g.extendedProps)||void 0===j?void 0:j.status)&&(null===(_=D()(null===e||void 0===e||null===(y=e.event)||void 0===y||null===(N=y._def)||void 0===N||null===(A=N.extendedProps)||void 0===A?void 0:A.appointmentDate))||void 0===_?void 0:_.format("YYYY-MM-DD"))>=D()(new Date).format("YYYY-MM-DD")?"Upcoming Appointment":"Missed"===(null===e||void 0===e||null===(b=e.event)||void 0===b||null===(w=b._def)||void 0===w||null===(M=w.extendedProps)||void 0===M?void 0:M.status)?"Missed Appointment":"Completed Appointment"})]})})},height:"80vh",now:null,eventClick:e=>{ve(e.event),ie(!0)},dayMaxEvents:1,nowIndicator:!1})}),(0,P.jsxs)(h.Z,{show:de,onHide:()=>{ie(!1)},centered:!0,animation:!1,size:"lg",className:"custom-modal",children:[(0,P.jsx)(h.Z.Header,{closeButton:!0,children:(0,P.jsx)(h.Z.Title,{className:"appointment-modal-title",children:"Booked"===(null===se||void 0===se||null===(l=se._def)||void 0===l||null===(j=l.extendedProps)||void 0===j?void 0:j.status)&&(null===(N=D()(null===se||void 0===se||null===(b=se._def)||void 0===b||null===(w=b.extendedProps)||void 0===w?void 0:w.appointmentDate))||void 0===N?void 0:N.format("YYYY-MM-DD"))>=D()(new Date).format("YYYY-MM-DD")?"Upcoming Appointment":"Missed"===(null===se||void 0===se||null===(M=se._def)||void 0===M||null===(Y=M.extendedProps)||void 0===Y?void 0:Y.status)?"Missed Appointment":"Completed Appointment"})}),(0,P.jsxs)(h.Z.Body,{children:[(0,P.jsx)("p",{style:{color:"#1A1A1A",fontWeight:600,fontSize:"18px"},className:"mb-2",children:"Appointment"}),(0,P.jsxs)("p",{style:{color:"#1A1A1A",fontWeight:400,fontSize:"16px"},children:[pe," -"," ",null===(S=D()(null===se||void 0===se||null===(k=se._def)||void 0===k||null===(I=k.extendedProps)||void 0===I?void 0:I.appointmentDate))||void 0===S?void 0:S.format("MMM-D"),". ",null===se||void 0===se||null===(Z=se._def)||void 0===Z||null===(T=Z.extendedProps)||void 0===T?void 0:T.appointmentStartTime," -"," ",null===se||void 0===se||null===(C=se._def)||void 0===C||null===(z=C.extendedProps)||void 0===z?void 0:z.appointmentEndTime]}),(0,P.jsx)("div",{className:"pt-3 w-100",children:(0,P.jsxs)("span",{className:"d-flex",onClick:()=>{ie(!1),$(!0)},children:[(0,P.jsx)(s.xbJ,{style:{color:"#FD2121"},size:20}),xe?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(u.rU,{to:null===se||void 0===se||null===(E=se._def)||void 0===E||null===(U=E.extendedProps)||void 0===U?void 0:U.imageUrl,target:"_blank",className:"px-2 custom-text-ellipsis text-link",children:xe}),(0,P.jsx)(v._hL,{style:{color:"#000071",fontWeight:500,fontSize:"16px"},size:18})]}):he?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("p",{className:"px-2 custom-text-ellipsis text-cursor-pointer",children:he}),(0,P.jsx)(v._hL,{style:{color:"#000071",fontWeight:500,fontSize:"16px"},size:18})]}):(0,P.jsx)("p",{className:"px-2",children:"No Doc Found"})]})}),(0,P.jsxs)("span",{className:"d-flex align-items-center",children:[(0,P.jsx)("img",{src:g.Z.NEW_PATIENT_GRAY,alt:"new patient icon"}),(0,P.jsx)("p",{className:"mb-0 px-2",style:{color:"#1A1A1A",fontWeight:500,fontSize:"16px"},children:null===se||void 0===se||null===(F=se._def)||void 0===F||null===(B=F.extendedProps)||void 0===B?void 0:B.patientName})]}),(0,P.jsxs)("span",{children:[(0,P.jsx)("p",{className:"mb-0 mt-4",style:{color:"#999999",fontWeight:500,fontSize:"16px"},children:"Reason:"}),(0,P.jsx)("p",{style:{fontWeight:400,fontSize:"14px",textAlign:"justify"},children:null!==se&&void 0!==se&&null!==(W=se._def)&&void 0!==W&&null!==(H=W.extendedProps)&&void 0!==H&&H.reasonForAppoinment?null===se||void 0===se||null===(L=se._def)||void 0===L||null===(R=L.extendedProps)||void 0===R?void 0:R.reasonForAppoinment:"N/A"})]}),"Booked"===(null===se||void 0===se||null===(G=se._def)||void 0===G||null===(O=G.extendedProps)||void 0===O?void 0:O.status)&&(0,P.jsx)(f.Z,{className:"w-100 mt-4 bg-dk-purple",onClick:()=>{var e,n;return n=null===se||void 0===se||null===(e=se._def)||void 0===e?void 0:e.extendedProps,console.log("data",n),localStorage.setItem("slotDescription",JSON.stringify(n)),void K(p.m.TELE_CONSULTATION)},children:"Join Appointment"})]})]}),he&&(0,P.jsx)(A,{show:X,onHide:()=>$(!1),data:null===se||void 0===se||null===(J=se._def)||void 0===J?void 0:J.extendedProps})]})})}}}]);
//# sourceMappingURL=1403.56d26f28.chunk.js.map