"use strict";(self.webpackChunkfamily_doc_app=self.webpackChunkfamily_doc_app||[]).push([[3661],{52268:(e,o,n)=>{n.d(o,{Tf:()=>l,_Y:()=>d,bA:()=>i,df:()=>a,lt:()=>s,sP:()=>t});const i=[{lookupId:6,value:"Nurse"},{lookupId:7,value:"Receptionist"}],t=[{lookupId:101,value:"Male"},{lookupId:102,value:"Female"},{lookupId:103,value:"Other"}],l={Destroyed:"destroyed",Error:"error",Incoming:"incoming",Registered:"registered",Registering:"registering",TokenWillExpire:"tokenWillExpire",Unregistered:"unregistered"},s={Connected:"connected",Accept:"accept",Audio:"audio",Cancel:"cancel",Disconnect:"disconnect",Error:"error",Mute:"mute",Reconnected:"reconnected",Reconnecting:"reconnecting",Reject:"reject",Ringing:"ringing",Sample:"sample",Volume:"volume",WarningCleared:"warning-cleared",Warning:"warning"},d=[{lookupId:401,name:"Multiple Choice",value:"Radio"},{lookupId:402,name:"Checkbox",value:"Checkbox"},{lookupId:404,name:"Paragraph",value:"TextBox"}],a=[{lookupId:801,value:"1 Month"},{lookupId:802,value:"3 Months"},{lookupId:803,value:"6 Months"},{lookupId:804,value:"12 Months"}]},23661:(e,o,n)=>{n.r(o),n.d(o,{default:()=>I});var i=n(72791),t=n(95070),l=n(36638),s=n(89743),d=n(2677),a=n(43360),r=n(16856),c=n(30203),u=n(78820),m=n(61134),p=n(59434),v=n(7692),x=n(57689),h=n(3810),g=n(52268),f=n(79243),b=n(46587),j=n(80184);const I=function(){var e;const{handleSubmit:o,setValue:n,register:I}=(0,m.cI)(),[A,w]=(0,i.useState)("401"),[C,y]=(0,i.useState)([{questionId:"",question:"",options:[""],selectedType:"401",isActive:!0,isRequired:!0}]),[q,k]=(0,i.useState)(!1),{adminOnlinePrescripionForm:N,isLoading:T,isError:R,isSuccess:S}=(0,p.v9)((e=>null===e||void 0===e?void 0:e.onlinePrescriptionForm));console.log("adminOnlinePrescripionForm",N);const Z=(0,x.s0)(),F=(0,p.I0)(),L=JSON.parse(localStorage.getItem("family_doc_app"));let E=new URLSearchParams(window.location.search).get("disease");const P=()=>{y([...C,{questionId:"",question:"",options:[""],selectedType:"401",isActive:!0,isRequired:!0}])},Q=e=>{const o=[...C];o[e].options=[...C[e].options,""],y(o)},M=(e,o,n)=>{const i=[...C];i[e]={...i[e],options:i[e].options.map(((e,i)=>i===o?{...e,answerLabel:n}:e))},y(i)},_=(e,o)=>{const n=[...C];n[e]={...n[e],options:n[e].options.filter(((e,n)=>n!==o))},y(n)};function z(){const e={formId:E};F((0,f.Pw)(e))}function D(){1===(null===L||void 0===L?void 0:L.roleId)?Z(h.m.SUPERADMIN_FORMS):4===(null===L||void 0===L?void 0:L.roleId)&&Z(h.m.ADMIN_FORMS);F((0,f.LB)({Search:""}))}return(0,i.useEffect)((()=>{const e={formId:E};F((0,f.Pw)(e))}),[F,E]),(0,i.useEffect)((()=>{var e,o;E&&N&&(y([]),null===N||void 0===N||null===(e=N.data)||void 0===e||null===(o=e.formQuestionList)||void 0===o||o.map(((e,o)=>{var n;const i={title:null===N||void 0===N||null===(n=N.data)||void 0===n?void 0:n.title,questionId:e.questionId,question:e.question,options:e.formAnswersList,selectedType:e.answerTypeId.toString(),isActive:e.isActive,isRequired:e.isRequired};return y((e=>[...e,i]))})))}),[E,N]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h5",{children:"Questionnaires"}),(0,j.jsx)(t.Z,{className:"shadow-sm custom-questionnaires",children:S?(0,j.jsx)(l.Z,{onSubmit:o((function(e){var o,n,i;const t={formId:E?null===N||void 0===N||null===(o=N.data)||void 0===o?void 0:o.formId:0,title:null!==e&&void 0!==e&&e.title?null===e||void 0===e?void 0:e.title:null===N||void 0===N||null===(n=N.data)||void 0===n?void 0:n.title,isActive:!E||(null===N||void 0===N||null===(i=N.data)||void 0===i?void 0:i.isActive),formQuestionList:C.map(((e,o)=>{var n;return{questionId:null!==e&&void 0!==e&&e.questionId?null===e||void 0===e?void 0:e.questionId:0,question:null===e||void 0===e?void 0:e.question,answerTypeId:null===e||void 0===e?void 0:e.selectedType,questionOrder:o,isActive:null===e||void 0===e?void 0:e.isActive,isRequired:null===e||void 0===e?void 0:e.isRequired,answerTypeName:"401"===(null===e||void 0===e?void 0:e.selectedType)?"Radio":"402"===(null===e||void 0===e?void 0:e.selectedType)?"Checkbox":"404"===(null===e||void 0===e?void 0:e.selectedType)?"TextBox":"",formId:E?null===N||void 0===N||null===(n=N.data)||void 0===n?void 0:n.formId:0,formAnswersList:e.options.map(((e,o)=>({formAnswereId:null!==e&&void 0!==e&&e.formAnswereId?null===e||void 0===e?void 0:e.formAnswereId:0,formQuestionId:null!==e&&void 0!==e&&e.formQuestionId?null===e||void 0===e?void 0:e.formQuestionId:0,answerLabel:null!==e&&void 0!==e&&e.answerLabel?null===e||void 0===e?void 0:e.answerLabel:"Answer Text"})))}}))};F((0,f.mh)({finalData:t,onCreateSuccess:D}))})),children:(0,j.jsxs)(s.Z,{className:"m-3 d-flex justify-content-center flex-column",children:[(0,j.jsxs)(d.Z,{xl:7,lg:10,xs:12,className:"mx-auto mb-3 p-0",children:[(0,j.jsxs)(l.Z.Group,{className:"px-3 pt-2 pb-4 rounded mb-3",controlId:"formTitle",style:{boxShadow:"0px 0px 24px 0px #0000000A",borderTop:"6px solid #000071"},children:[(0,j.jsxs)(l.Z.Label,{className:"mt-2 fw-bold",style:{fontSize:"1.5rem"},children:[q?"Enter ":"","Form Title"]}),(0,j.jsx)(l.Z.Control,{type:"text",className:"bg-transparent",placeholder:"Form Title",maxLength:250,name:"title",onChange:e=>n("title",e.target.value),disabled:E&&!q,defaultValue:null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.title})]}),0===(null===C||void 0===C?void 0:C.length)?(0,j.jsx)(a.Z,{variant:"primary",type:"button",className:"Admin-Add-btn px-3 float-end",onClick:P,children:(0,j.jsx)(c.wEH,{size:24})}):E&&!q?(0,j.jsxs)(a.Z,{variant:"primary",type:"button",className:"Admin-Add-btn px-3 float-end",onClick:()=>{k(!0)},children:[(0,j.jsx)(v.Hlf,{size:24})," Edit"]}):""]}),C.map(((e,o)=>(0,j.jsxs)(d.Z,{xl:7,lg:10,xs:12,className:"p-3 rounded mx-auto mb-3",style:{boxShadow:"0px 0px 24px 0px #0000000A",borderLeft:"6px solid #F26522"},children:[(0,j.jsxs)(l.Z.Group,{className:"mb-3",children:[(!E||q)&&(0,j.jsxs)("div",{className:"d-flex justify-content-between flex-wrap align-items-center custom-col-rev mb-2",children:[(0,j.jsxs)(l.Z.Label,{className:"text-w-full mb-0",children:["Q.","".concat(o+1,".")," Enter Question"]}),(0,j.jsx)(d.Z,{xl:5,sm:6,xs:12,children:(0,j.jsx)(l.Z.Select,{"aria-label":"Select Type",onChange:e=>{((e,o)=>{w(e.target.value);const n=[...C];n[o].selectedType=e.target.value,y(n)})(e,o)},defaultValue:(null===e||void 0===e?void 0:e.selectedType)||A,disabled:E&&(null===e||void 0===e?void 0:e.questionId),className:"bg-transparent",children:g._Y.map((e=>(0,j.jsx)("option",{value:null===e||void 0===e?void 0:e.lookupId,children:e.name})))})})]}),(0,j.jsx)(l.Z.Control,{type:"text",placeholder:"Question",maxLength:250,defaultValue:null===e||void 0===e?void 0:e.question,disabled:E&&!q,name:"questionText".concat(o),required:!0,onChange:e=>((e,o)=>{const n=[...C];n[e].question=o,y(n)})(o,e.target.value),className:"bg-transparent"}),(0,j.jsxs)("div",{className:"mt-2 questionnaires-option",children:["401"===(null===e||void 0===e?void 0:e.selectedType)&&(0,j.jsxs)(j.Fragment,{children:[e.options.map(((e,n)=>(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)(l.Z.Check,{label:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.Z.Control,{type:"text",placeholder:"Add option",className:"border-0 ms-2 bg-transparent",defaultValue:e.answerLabel,disabled:E&&!q,onChange:e=>M(o,n,e.target.value)})}),name:"group".concat(o),type:"radio",id:"radio-".concat(n),className:"d-flex align-items-center mb-1 w-100",disabled:!0}),!E&&(0,j.jsx)("span",{className:"mx-3",children:(0,j.jsx)(u.oHP,{size:18,onClick:()=>_(o,n)})})]},"radio-".concat(n)))),(!E||!(null!==e&&void 0!==e&&e.questionId))&&(0,j.jsx)("span",{className:"text-cursor-pointer text-decoration-underline",style:{color:"#3F8BFC",fontSize:"0.9em"},onClick:()=>Q(o),children:"Add another option"})]}),"404"===(null===e||void 0===e?void 0:e.selectedType)&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.Z.Control,{as:"textarea",rows:3,placeholder:"Answer Text",className:"mt-2",disabled:!0})}),"402"===(null===e||void 0===e?void 0:e.selectedType)&&(0,j.jsxs)(j.Fragment,{children:[e.options.map(((e,n)=>(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)(l.Z.Check,{label:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.Z.Control,{type:"text",placeholder:"Add option",className:"border-0 ms-2 bg-transparent",defaultValue:e.answerLabel,disabled:E&&!q,onChange:e=>M(o,n,e.target.value)})}),name:"group".concat(o),type:"checkbox",id:"checkbox-".concat(n),className:"d-flex align-items-center mb-1 w-100",disabled:!0}),!E&&(0,j.jsx)("span",{className:"mx-3",children:(0,j.jsx)(u.oHP,{size:18,onClick:()=>_(o,n)})})]},"checkbox-".concat(n)))),(!E||!(null!==e&&void 0!==e&&e.questionId))&&(0,j.jsx)("span",{className:"text-cursor-pointer text-decoration-underline",style:{color:"#3F8BFC",fontSize:"0.9em"},onClick:()=>Q(o),children:"Add another option"})]})]})]}),(0,j.jsxs)("div",{className:"w-100 d-flex flex-wrap justify-content-end",children:[(!E||E&&q)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{style:{borderRight:"1px solid #CACACA"},children:(0,j.jsx)(c.wEH,{size:24,color:"#CACACA",className:"mx-2 text-cursor-pointer","data-toggle":"tooltip","data-placement":"top",title:"Add Question",onClick:P})}),(0,j.jsx)("span",{className:"me-2",style:{borderRight:"1px solid #CACACA"},children:(0,j.jsx)(r.I0,{size:26,color:"#CACACA",className:"mx-2 text-cursor-pointer","data-toggle":"tooltip","data-placement":"top",title:"Delete",onClick:()=>{if(E&&q&&null!==e&&void 0!==e&&e.questionId){var n;!function(e){let o={questionId:e};F((0,f.jQ)({finalData:o,getPresForm:z}))}(null===(n=e.options[o])||void 0===n?void 0:n.formQuestionId)}else(e=>{const o=[...C];o.splice(e,1),y(o)})(o)}})})]}),(0,j.jsx)(l.Z.Check,{type:"switch",id:"custom-switch-".concat(o),label:"Active",...I("isActive"),checked:!1!==(null===e||void 0===e?void 0:e.isActive),onChange:n=>{if(E&&q&&null!==e&&void 0!==e&&e.questionId){!function(e){let o={questionId:e};F((0,f.XB)({finalData:o,getPresForm:z}))}(e.questionId)}else((e,o)=>{console.log("Switch in section ".concat(e," is now ").concat(o));const n=[...C];n[e]={...n[e],isActive:o},y(n)})(o,n.target.checked)},disabled:E&&!q,className:"me-2"}),(0,j.jsx)(l.Z.Check,{type:"switch",id:"required-switch-".concat(o),label:"Required",...I("isRequired"),checked:!1!==(null===e||void 0===e?void 0:e.isRequired),onChange:n=>{if(E&&q&&null!==e&&void 0!==e&&e.questionId){!function(e){let o={questionId:e};F((0,f.xB)({finalData:o,getPresForm:z}))}(e.questionId)}else((e,o)=>{console.log("Required in section ".concat(e," is now ").concat(o));const n=[...C];n[e]={...n[e],isRequired:o},y(n)})(o,n.target.checked)},disabled:E&&!q})]})]},o))),(0!==(null===C||void 0===C?void 0:C.length)&&!E||E&&q)&&(0,j.jsx)(d.Z,{children:(0,j.jsx)(a.Z,{variant:"primary",type:"submit",className:"Admin-Add-btn fw-bold float-end",children:"Save"})})]})}):T?(0,j.jsx)(b.Z,{}):R?(0,j.jsx)("p",{className:"text-center mt-3",children:"Network Error..."}):null})]})}}}]);
//# sourceMappingURL=3661.d367d0bd.chunk.js.map