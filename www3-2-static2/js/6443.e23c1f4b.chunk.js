"use strict";(self.webpackChunkfamily_doc_app=self.webpackChunkfamily_doc_app||[]).push([[6443,0],{46443:(e,s,a)=>{a.r(s),a.d(s,{default:()=>y});var l=a(72791),t=a(95070),o=a(47022),i=a(89743),n=a(2677),r=a(43360),d=a(36638),c=a(69499),m=a(84373),v=a(57689),f=a(11087),u=a(3810),x=a(83086),h=a(59434),N=a(72426),p=a.n(N),b=a(73683),j=a(66791),g=a(80184);const y=function(){const e=(0,v.TH)(),s=(0,v.UO)(),a=(0,l.useRef)(null),N=(0,l.useRef)(null),y=(0,h.I0)(),{user:I}=(0,h.v9)((e=>e.auth)),[w,C]=(0,l.useState)(""),{inboxId:W,allMessages:Z}=(0,h.v9)((e=>null===e||void 0===e?void 0:e.chat)),{staffData:F}=null===e||void 0===e?void 0:e.state,U=null===I||void 0===I?void 0:I.userId;(0,l.useEffect)((()=>{j.W&&(null===j.W||void 0===j.W||j.W.on("connect",(()=>{console.log("signal1",null===j.W||void 0===j.W?void 0:j.W.connected)})),null===j.W||void 0===j.W||j.W.emit("connectToUserRoom",{userId:U},(()=>{console.log("signal2",null===j.W||void 0===j.W?void 0:j.W.connected)})),!1===(null===j.W||void 0===j.W?void 0:j.W.connected)&&(null===j.W||void 0===j.W||j.W.on("reconnect",(()=>{console.log("reconnect",null===j.W||void 0===j.W?void 0:j.W.connected)}))),!0===(null===j.W||void 0===j.W?void 0:j.W.connected)&&console.log("refttytfconnect",null===j.W||void 0===j.W?void 0:j.W.connected))}),[F,j.W]),(0,l.useEffect)((()=>{!0===(null===j.W||void 0===j.W?void 0:j.W.connected)&&(null===j.W||void 0===j.W||j.W.on("messageData",(e=>{if(null!==e&&void 0!==e&&e.data){var s;const a=null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.data,l=JSON.parse(a),t={createdDate:(0,b.oA)(new Date),file:null!==l&&void 0!==l&&l.file?null===l||void 0===l?void 0:l.file:null,fileUrl:null!==l&&void 0!==l&&l.fileUrl?null===l||void 0===l?void 0:l.fileUrl:null,fromUserId:null===l||void 0===l?void 0:l.fromUserId,fromUserName:null!==l&&void 0!==l&&l.fromUserName?null===l||void 0===l?void 0:l.fromUserName:null!==F&&void 0!==F&&F.name?null===F||void 0===F?void 0:F.name:null,image:null!==l&&void 0!==l&&l.image?null===l||void 0===l?void 0:l.image:null,imageUrl:null!==l&&void 0!==l&&l.imageUrl?null===l||void 0===l?void 0:l.imageUrl:null,inboxId:null===l||void 0===l?void 0:l.inboxId,message:null===l||void 0===l?void 0:l.message,messageId:null!==l&&void 0!==l&&l.messageId?null===l||void 0===l?void 0:l.messageId:null,toUserId:null===l||void 0===l?void 0:l.toUserId,toUserName:null!==l&&void 0!==l&&l.toUserName?null===l||void 0===l?void 0:l.toUserName:null};y((0,x.FT)(t))}})))}),[j.W,W]);const E=e=>{j.W.emit("sendMessage",{userIds:[{id:+(null===s||void 0===s?void 0:s.staffId)}],data:JSON.stringify(null===e||void 0===e?void 0:e.data),type:"inteli_health"})},R=e=>{var a;const l={inboxId:null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.inboxId,fromUserId:null===I||void 0===I?void 0:I.userId,toUserId:+(null===s||void 0===s?void 0:s.staffId),message:w||"",isChat:!0};y((0,x.bG)({finalData:l,moveToNext:E}))};return(0,l.useEffect)((()=>{const e={inboxId:W||0};y((0,x.SO)(e))}),[y,W]),(0,l.useEffect)((()=>{const e={fromUserId:null===I||void 0===I?void 0:I.userId,toUserId:+(null===s||void 0===s?void 0:s.staffId)};y((0,x.Zm)(e))}),[y,null===I||void 0===I?void 0:I.userId,null===s||void 0===s?void 0:s.staffId]),(0,l.useEffect)((()=>{var e;null===(e=a.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[Z]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("nav",{"aria-label":"breadcrumb",children:(0,g.jsxs)("ol",{className:"breadcrumb",children:[(0,g.jsx)("li",{className:"breadcrumb-item",children:(0,g.jsx)(f.rU,{to:{pathname:u.m.STAFF},className:"text-decoration-none fs-5",style:{color:"#999999"},children:"Staff"})}),(0,g.jsx)(m.hjJ,{className:"ms-2 mt-2"}),(0,g.jsx)("li",{className:"breadcrumb-item active fs-5","aria-current":"page",style:{color:"#000071"},children:"Chat"})]})}),(0,g.jsx)("div",{className:"Staff-Chat-MainClass",children:(0,g.jsx)(t.Z,{className:"h-100 ",children:(0,g.jsx)(t.Z.Body,{className:"py-0 px-0",children:(0,g.jsx)(t.Z.Title,{className:"mb-0",children:(0,g.jsx)(o.Z,{fluid:!0,className:"",children:(0,g.jsx)(i.Z,{children:(0,g.jsxs)(n.Z,{xl:12,lg:10,md:12,className:"px-0 chatContent",style:{boxShadow:"0 0 8px #C3C3C3"},children:[(0,g.jsx)("div",{className:"d-flex justify-content-between mobileFlex_Col py-2 border-bottom px-4 ",children:(0,g.jsx)("div",{className:"d-flex justify-content-center align-items-center chatActive mb-sm-0 mb-3",children:(0,g.jsxs)("div",{className:"d-flex align-items-center py-0",children:[(0,g.jsx)("span",{children:(0,g.jsx)("img",{className:"rounded-circle",width:50,src:null!==F&&void 0!==F&&F.imageUrl?null===F||void 0===F?void 0:F.imageUrl:"https://ui-avatars.com/api/?name=".concat("".concat(null===F||void 0===F?void 0:F.name),"&background=000071&color=fff"),alt:"UserImage"})}),(0,g.jsx)("h5",{className:"fw-semibold mb-0 ms-3 mobileTextHeading",children:null===F||void 0===F?void 0:F.name})]})})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"div-fixed-height",style:{background:"#FBFBFB"},children:Z.length>0?null===Z||void 0===Z?void 0:Z.map(((e,s)=>{var l,t,o,r,d;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"d-flex flex-column h-100 px-4 py-3 chatBox",children:(0,g.jsxs)("div",{children:[(null===Z||void 0===Z||null===(l=Z[s-1])||void 0===l||null===(t=l.createdDate)||void 0===t||null===(o=t.split("T"))||void 0===o?void 0:o[0])!==(null===e||void 0===e||null===(r=e.createdDate)||void 0===r||null===(d=r.split("T"))||void 0===d?void 0:d[0])&&(0,g.jsx)("div",{className:"text-center rounded-pill mx-auto chatSpan bg-white",children:p()(null===e||void 0===e?void 0:e.createdDate).format("DD-MM-YYYY")===p()(new Date).format("DD-MM-YYYY")?"Today":p()(null===e||void 0===e?void 0:e.createdDate).format("DD-MM-YYYY")}),(0,g.jsx)("div",{children:(0,g.jsx)(i.Z,{children:(null===e||void 0===e?void 0:e.fromUserId)!==(null===I||void 0===I?void 0:I.userId)?(0,g.jsxs)(n.Z,{lg:8,md:6,className:"d-flex flex-column justify-content-start",children:[(0,g.jsxs)("div",{className:"chatMessage_left d-flex justify-content-start align-items-center mobileFlex_Col mb-1",children:[(0,g.jsx)("img",{className:"me-2 mb-2 mb-sm-0 rounded-circle",style:{width:"4%"},src:null!==e&&void 0!==e&&e.imageUrl?null===e||void 0===e?void 0:e.imageUrl:"https://ui-avatars.com/api/?name=".concat(null===e||void 0===e?void 0:e.fromUserName,"&background=000071&color=fff"),alt:"UserImage"}),(0,g.jsx)("span",{className:"messageSpan",children:null===e||void 0===e?void 0:e.message})]}),(0,g.jsx)("span",{className:"ms-5 chatTime",children:p()(null===e||void 0===e?void 0:e.createdDate).format("HH:MM A")})]}):(0,g.jsxs)(n.Z,{lg:4,md:6,className:"chatMessage_right text-white d-flex flex-column align-items-end justify-content-end w-100",children:[(0,g.jsx)("span",{className:"mb-1 mt-3 mobile_margin sender-message",children:null===e||void 0===e?void 0:e.message}),(0,g.jsx)("div",{className:"chatTime align-self-end",children:p()(null===e||void 0===e?void 0:e.createdDate).format("HH:MM A")})]})})})]})}),(0,g.jsx)("div",{ref:a})]})})):(0,g.jsxs)("h5",{className:"mb-0 text-center text-black-50 d-flex justify-content-center align-items-center h-100",children:["Welcome to our chat system ",(0,g.jsx)("br",{})," Please feel free to start typing your message"]})}),(0,g.jsx)("div",{className:"border-top",children:(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center px-4",children:[(0,g.jsx)("div",{className:"d-flex justify-content-center",children:(0,g.jsx)(r.Z,{className:"bg-transparent border-0",type:"file",children:(0,g.jsx)("img",{className:"",src:c.Z.CLIP_ICON,alt:"clip"})})}),(0,g.jsx)("div",{className:"w-100",children:(0,g.jsxs)(d.Z.Group,{className:"position-relative py-3  w-100",children:[(0,g.jsx)(d.Z.Control,{className:"padding rounded-pill",placeholder:"Type a message here\u2026",value:w,onChange:e=>{C(e.target.value)},ref:N,onKeyDown:e=>{32===e.which&&0===N.current.selectionStart&&e.preventDefault()}}),(0,g.jsx)(r.Z,{className:"sendIcon rounded-circle",onClick:e=>{if(W){const e={inboxId:W,fromUserId:null===I||void 0===I?void 0:I.userId,toUserId:+(null===s||void 0===s?void 0:s.staffId),message:w||"",isChat:!0};y((0,x.bG)({finalData:e,moveToNext:E}))}else{const e={fromUserId:null===I||void 0===I?void 0:I.userId,toUserId:+(null===s||void 0===s?void 0:s.staffId)};y((0,x.$p)({finalData:e,movetoNext:R}))}e.preventDefault(),C("")},disabled:""===w,children:(0,g.jsx)("img",{className:"",src:c.Z.SEND_ICON,alt:"messageIcon"})})]})})]})})]})]})})})})})})})]})}},95070:(e,s,a)=>{a.d(s,{Z:()=>R});var l=a(81694),t=a.n(l),o=a(72791),i=a(10162),n=a(80184);const r=o.forwardRef(((e,s)=>{let{className:a,bsPrefix:l,as:o="div",...r}=e;return l=(0,i.vE)(l,"card-body"),(0,n.jsx)(o,{ref:s,className:t()(a,l),...r})}));r.displayName="CardBody";const d=r,c=o.forwardRef(((e,s)=>{let{className:a,bsPrefix:l,as:o="div",...r}=e;return l=(0,i.vE)(l,"card-footer"),(0,n.jsx)(o,{ref:s,className:t()(a,l),...r})}));c.displayName="CardFooter";const m=c;var v=a(96040);const f=o.forwardRef(((e,s)=>{let{bsPrefix:a,className:l,as:r="div",...d}=e;const c=(0,i.vE)(a,"card-header"),m=(0,o.useMemo)((()=>({cardHeaderBsPrefix:c})),[c]);return(0,n.jsx)(v.Z.Provider,{value:m,children:(0,n.jsx)(r,{ref:s,...d,className:t()(l,c)})})}));f.displayName="CardHeader";const u=f,x=o.forwardRef(((e,s)=>{let{bsPrefix:a,className:l,variant:o,as:r="img",...d}=e;const c=(0,i.vE)(a,"card-img");return(0,n.jsx)(r,{ref:s,className:t()(o?"".concat(c,"-").concat(o):c,l),...d})}));x.displayName="CardImg";const h=x,N=o.forwardRef(((e,s)=>{let{className:a,bsPrefix:l,as:o="div",...r}=e;return l=(0,i.vE)(l,"card-img-overlay"),(0,n.jsx)(o,{ref:s,className:t()(a,l),...r})}));N.displayName="CardImgOverlay";const p=N,b=o.forwardRef(((e,s)=>{let{className:a,bsPrefix:l,as:o="a",...r}=e;return l=(0,i.vE)(l,"card-link"),(0,n.jsx)(o,{ref:s,className:t()(a,l),...r})}));b.displayName="CardLink";const j=b;var g=a(27472);const y=(0,g.Z)("h6"),I=o.forwardRef(((e,s)=>{let{className:a,bsPrefix:l,as:o=y,...r}=e;return l=(0,i.vE)(l,"card-subtitle"),(0,n.jsx)(o,{ref:s,className:t()(a,l),...r})}));I.displayName="CardSubtitle";const w=I,C=o.forwardRef(((e,s)=>{let{className:a,bsPrefix:l,as:o="p",...r}=e;return l=(0,i.vE)(l,"card-text"),(0,n.jsx)(o,{ref:s,className:t()(a,l),...r})}));C.displayName="CardText";const W=C,Z=(0,g.Z)("h5"),F=o.forwardRef(((e,s)=>{let{className:a,bsPrefix:l,as:o=Z,...r}=e;return l=(0,i.vE)(l,"card-title"),(0,n.jsx)(o,{ref:s,className:t()(a,l),...r})}));F.displayName="CardTitle";const U=F,E=o.forwardRef(((e,s)=>{let{bsPrefix:a,className:l,bg:o,text:r,border:c,body:m=!1,children:v,as:f="div",...u}=e;const x=(0,i.vE)(a,"card");return(0,n.jsx)(f,{ref:s,...u,className:t()(l,x,o&&"bg-".concat(o),r&&"text-".concat(r),c&&"border-".concat(c)),children:m?(0,n.jsx)(d,{children:v}):v})}));E.displayName="Card";const R=Object.assign(E,{Img:h,Title:U,Subtitle:w,Body:d,Link:j,Text:W,Header:u,Footer:m,ImgOverlay:p})},96040:(e,s,a)=>{a.d(s,{Z:()=>t});const l=a(72791).createContext(null);l.displayName="CardHeaderContext";const t=l},47022:(e,s,a)=>{a.d(s,{Z:()=>d});var l=a(81694),t=a.n(l),o=a(72791),i=a(10162),n=a(80184);const r=o.forwardRef(((e,s)=>{let{bsPrefix:a,fluid:l=!1,as:o="div",className:r,...d}=e;const c=(0,i.vE)(a,"container"),m="string"===typeof l?"-".concat(l):"-fluid";return(0,n.jsx)(o,{ref:s,...d,className:t()(r,l?"".concat(c).concat(m):c)})}));r.displayName="Container";const d=r},11701:(e,s,a)=>{a.d(s,{Ed:()=>o,UI:()=>t,XW:()=>i});var l=a(72791);function t(e,s){let a=0;return l.Children.map(e,(e=>l.isValidElement(e)?s(e,a++):e))}function o(e,s){let a=0;l.Children.forEach(e,(e=>{l.isValidElement(e)&&s(e,a++)}))}function i(e,s){return l.Children.toArray(e).some((e=>l.isValidElement(e)&&e.type===s))}},36638:(e,s,a)=>{a.d(s,{Z:()=>Y});var l=a(81694),t=a.n(l),o=a(52007),i=a.n(o),n=a(72791),r=a(80184);const d={type:i().string,tooltip:i().bool,as:i().elementType},c=n.forwardRef(((e,s)=>{let{as:a="div",className:l,type:o="valid",tooltip:i=!1,...n}=e;return(0,r.jsx)(a,{...n,ref:s,className:t()(l,"".concat(o,"-").concat(i?"tooltip":"feedback"))})}));c.displayName="Feedback",c.propTypes=d;const m=c;var v=a(84934),f=a(10162);const u=n.forwardRef(((e,s)=>{let{id:a,bsPrefix:l,className:o,type:i="checkbox",isValid:d=!1,isInvalid:c=!1,as:m="input",...u}=e;const{controlId:x}=(0,n.useContext)(v.Z);return l=(0,f.vE)(l,"form-check-input"),(0,r.jsx)(m,{...u,ref:s,type:i,id:a||x,className:t()(o,l,d&&"is-valid",c&&"is-invalid")})}));u.displayName="FormCheckInput";const x=u,h=n.forwardRef(((e,s)=>{let{bsPrefix:a,className:l,htmlFor:o,...i}=e;const{controlId:d}=(0,n.useContext)(v.Z);return a=(0,f.vE)(a,"form-check-label"),(0,r.jsx)("label",{...i,ref:s,htmlFor:o||d,className:t()(l,a)})}));h.displayName="FormCheckLabel";const N=h;var p=a(11701);const b=n.forwardRef(((e,s)=>{let{id:a,bsPrefix:l,bsSwitchPrefix:o,inline:i=!1,reverse:d=!1,disabled:c=!1,isValid:u=!1,isInvalid:h=!1,feedbackTooltip:b=!1,feedback:j,feedbackType:g,className:y,style:I,title:w="",type:C="checkbox",label:W,children:Z,as:F="input",...U}=e;l=(0,f.vE)(l,"form-check"),o=(0,f.vE)(o,"form-switch");const{controlId:E}=(0,n.useContext)(v.Z),R=(0,n.useMemo)((()=>({controlId:a||E})),[E,a]),k=!Z&&null!=W&&!1!==W||(0,p.XW)(Z,N),P=(0,r.jsx)(x,{...U,type:"switch"===C?"checkbox":C,ref:s,isValid:u,isInvalid:h,disabled:c,as:F});return(0,r.jsx)(v.Z.Provider,{value:R,children:(0,r.jsx)("div",{style:I,className:t()(y,k&&l,i&&"".concat(l,"-inline"),d&&"".concat(l,"-reverse"),"switch"===C&&o),children:Z||(0,r.jsxs)(r.Fragment,{children:[P,k&&(0,r.jsx)(N,{title:w,children:W}),j&&(0,r.jsx)(m,{type:g,tooltip:b,children:j})]})})})}));b.displayName="FormCheck";const j=Object.assign(b,{Input:x,Label:N});a(42391);const g=n.forwardRef(((e,s)=>{let{bsPrefix:a,type:l,size:o,htmlSize:i,id:d,className:c,isValid:m=!1,isInvalid:u=!1,plaintext:x,readOnly:h,as:N="input",...p}=e;const{controlId:b}=(0,n.useContext)(v.Z);return a=(0,f.vE)(a,"form-control"),(0,r.jsx)(N,{...p,type:l,size:i,ref:s,readOnly:h,id:d||b,className:t()(c,x?"".concat(a,"-plaintext"):a,o&&"".concat(a,"-").concat(o),"color"===l&&"".concat(a,"-color"),m&&"is-valid",u&&"is-invalid")})}));g.displayName="FormControl";const y=Object.assign(g,{Feedback:m}),I=n.forwardRef(((e,s)=>{let{className:a,bsPrefix:l,as:o="div",...i}=e;return l=(0,f.vE)(l,"form-floating"),(0,r.jsx)(o,{ref:s,className:t()(a,l),...i})}));I.displayName="FormFloating";const w=I,C=n.forwardRef(((e,s)=>{let{controlId:a,as:l="div",...t}=e;const o=(0,n.useMemo)((()=>({controlId:a})),[a]);return(0,r.jsx)(v.Z.Provider,{value:o,children:(0,r.jsx)(l,{...t,ref:s})})}));C.displayName="FormGroup";const W=C;var Z=a(53392);const F=n.forwardRef(((e,s)=>{let{bsPrefix:a,className:l,id:o,...i}=e;const{controlId:d}=(0,n.useContext)(v.Z);return a=(0,f.vE)(a,"form-range"),(0,r.jsx)("input",{...i,type:"range",ref:s,className:t()(l,a),id:o||d})}));F.displayName="FormRange";const U=F,E=n.forwardRef(((e,s)=>{let{bsPrefix:a,size:l,htmlSize:o,className:i,isValid:d=!1,isInvalid:c=!1,id:m,...u}=e;const{controlId:x}=(0,n.useContext)(v.Z);return a=(0,f.vE)(a,"form-select"),(0,r.jsx)("select",{...u,size:o,ref:s,className:t()(i,a,l&&"".concat(a,"-").concat(l),d&&"is-valid",c&&"is-invalid"),id:m||x})}));E.displayName="FormSelect";const R=E,k=n.forwardRef(((e,s)=>{let{bsPrefix:a,className:l,as:o="small",muted:i,...n}=e;return a=(0,f.vE)(a,"form-text"),(0,r.jsx)(o,{...n,ref:s,className:t()(l,a,i&&"text-muted")})}));k.displayName="FormText";const P=k,T=n.forwardRef(((e,s)=>(0,r.jsx)(j,{...e,ref:s,type:"switch"})));T.displayName="Switch";const D=Object.assign(T,{Input:j.Input,Label:j.Label}),S=n.forwardRef(((e,s)=>{let{bsPrefix:a,className:l,children:o,controlId:i,label:n,...d}=e;return a=(0,f.vE)(a,"form-floating"),(0,r.jsxs)(W,{ref:s,className:t()(l,a),controlId:i,...d,children:[o,(0,r.jsx)("label",{htmlFor:i,children:n})]})}));S.displayName="FloatingLabel";const M=S,O={_ref:i().any,validated:i().bool,as:i().elementType},_=n.forwardRef(((e,s)=>{let{className:a,validated:l,as:o="form",...i}=e;return(0,r.jsx)(o,{...i,ref:s,className:t()(a,l&&"was-validated")})}));_.displayName="Form",_.propTypes=O;const Y=Object.assign(_,{Group:W,Control:y,Floating:w,Check:j,Switch:D,Label:Z.Z,Text:P,Range:U,Select:R,FloatingLabel:M})},84934:(e,s,a)=>{a.d(s,{Z:()=>l});const l=a(72791).createContext({})},53392:(e,s,a)=>{a.d(s,{Z:()=>m});var l=a(81694),t=a.n(l),o=a(72791),i=(a(42391),a(2677)),n=a(84934),r=a(10162),d=a(80184);const c=o.forwardRef(((e,s)=>{let{as:a="label",bsPrefix:l,column:c=!1,visuallyHidden:m=!1,className:v,htmlFor:f,...u}=e;const{controlId:x}=(0,o.useContext)(n.Z);l=(0,r.vE)(l,"form-label");let h="col-form-label";"string"===typeof c&&(h="".concat(h," ").concat(h,"-").concat(c));const N=t()(v,l,m&&"visually-hidden",c&&h);return f=f||x,c?(0,d.jsx)(i.Z,{ref:s,as:"label",className:N,htmlFor:f,...u}):(0,d.jsx)(a,{ref:s,className:N,htmlFor:f,...u})}));c.displayName="FormLabel";const m=c},27472:(e,s,a)=>{a.d(s,{Z:()=>n});var l=a(72791),t=a(81694),o=a.n(t),i=a(80184);const n=e=>l.forwardRef(((s,a)=>(0,i.jsx)("div",{...s,ref:a,className:o()(s.className,e)})))}}]);
//# sourceMappingURL=6443.e23c1f4b.chunk.js.map