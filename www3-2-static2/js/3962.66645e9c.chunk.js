"use strict";(self.webpackChunkfamily_doc_app=self.webpackChunkfamily_doc_app||[]).push([[3962],{43962:(e,l,d)=>{d.r(l),d.d(l,{default:()=>P});var n=d(72791),o=d(90575),i=d(38217),t=d(52720),a=d(74332),s=d(57689),v=d(3810),u=d(95070),p=d(1444),r=d(36638),m=d(88135),c=d(43360),f=d(9897),x=d(72426),h=d.n(x),D=d(59434),g=d(24278),_=d(73683),M=d(80184);function P(){var e,l,d,x,P,A,S,j,I,Y,N,T,b,y,k,w,Z,C,E,B,F,O,U,W,z;const R=(0,n.useRef)(),G=(0,D.I0)(),H=JSON.parse(localStorage.getItem("family_doc_app")),L=(0,s.s0)(),[J,Q]=(0,n.useState)(),[V,q]=(0,n.useState)(null),{allAppointment:K}=(0,D.v9)((e=>e.appointment)),X=null===K||void 0===K||null===(e=K.data)||void 0===e?void 0:e.map((e=>({doctorId:null===e||void 0===e?void 0:e.doctorId,doctorName:null===e||void 0===e?void 0:e.doctorName,patientName:null===e||void 0===e?void 0:e.patientName,vonageSessionId:null===e||void 0===e?void 0:e.vonageSessionId,statusId:null===e||void 0===e?void 0:e.statusId,status:null===e||void 0===e?void 0:e.status,imageUrl:null===e||void 0===e?void 0:e.imageUrl,isDoctorMissed:null===e||void 0===e?void 0:e.isDoctorMissed,isPatientMissed:null===e||void 0===e?void 0:e.isPatientMissed,scheduleId:null===e||void 0===e?void 0:e.scheduleId,appointmentDate:null===e||void 0===e?void 0:e.appointmentDate,patientId:null===e||void 0===e?void 0:e.patientId,appointmentStartTime:null===e||void 0===e?void 0:e.appointmentStartTime,appointmentEndTime:null===e||void 0===e?void 0:e.appointmentEndTime,reasonForAppoinment:null===e||void 0===e?void 0:e.reasonForAppoinment,appointmentId:null===e||void 0===e?void 0:e.appointmentId,image:null===e||void 0===e?void 0:e.image,start:(0,_.ju)(null===e||void 0===e?void 0:e.appointmentDate,null===e||void 0===e?void 0:e.appointmentStartTime)}))),[$,ee]=(0,n.useState)(!1),[le,de]=(0,n.useState)(!1),[ne,oe]=(0,n.useState)(!1),[ie,te]=(0,n.useState)(!1),[ae,se]=(0,n.useState)(null);(0,n.useEffect)((()=>{if(ae){var e,l,d,n;let p=h()(new Date),r=new Date("".concat(h()(null===ae||void 0===ae||null===(e=ae._def)||void 0===e||null===(l=e.extendedProps)||void 0===l?void 0:l.appointmentDate).format("YYYY-MM-DD"),"T").concat(h()(null===ae||void 0===ae||null===(d=ae._def)||void 0===d||null===(n=d.extendedProps)||void 0===n?void 0:n.appointmentStartTime,"hh:mm A").format("HH:mm:ss"))),m=h().duration(h()(r).diff(p)).asMinutes();de(m<10&&m>-15);let c=!1;var o,i,t,a,s,v,u;if(m<=60)c=!1;else(202===(null===ae||void 0===ae||null===(o=ae._def)||void 0===o?void 0:o.extendedProps.statusId)||205===(null===ae||void 0===ae||null===(i=ae._def)||void 0===i||null===(t=i.extendedProps)||void 0===t?void 0:t.statusId)&&!0===(null===ae||void 0===ae||null===(a=ae._def)||void 0===a||null===(s=a.extendedProps)||void 0===s?void 0:s.isDoctorMissed)&&!1===(null===ae||void 0===ae||null===(v=ae._def)||void 0===v||null===(u=v.extendedProps)||void 0===u?void 0:u.isPatientMissed))&&(c=!0);oe(c)}else de(!1)}),[ae]);const ve=function(){var e,l;let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date(null===ae||void 0===ae||null===(e=ae._def)||void 0===e||null===(l=e.extendedProps)||void 0===l?void 0:l.appointmentDate),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return null===d||void 0===d?void 0:d.toLocaleDateString(n,{weekday:"long"})}();(0,n.useEffect)((()=>{const e={patientId:null===H||void 0===H?void 0:H.userId,month:+h()(J).format("M"),statusId:"205"===V?205:"204"===V?204:"206"===V?206:"203"===V?203:"201"===V?201:null};G((0,g.Qe)(e))}),[G,J,null===H||void 0===H?void 0:H.userId,V]);return(0,M.jsx)(u.Z,{className:"custom-full-calendar",children:(0,M.jsxs)(u.Z.Body,{className:"p-4",style:{borderRadius:"12px"},children:[(0,M.jsx)("span",{className:"fc-header-dropdown",children:(0,M.jsxs)(p.Z,{show:ie,onToggle:()=>{te(!ie)},children:[(0,M.jsx)(p.Z.Toggle,{variant:"success",id:"dropdown-basic",children:"Appointments"}),(0,M.jsx)(p.Z.Menu,{className:"mt-2",children:[{label:"Missed",value:205},{label:"Upcoming",value:204},{label:"Completed",value:206},{label:"Cancelled",value:203},{label:"Pending",value:201}].map((e=>(0,M.jsx)(r.Z.Check,{type:"checkbox",id:e.value,label:e.label,value:e.value,checked:null===V||void 0===V?void 0:V.includes(e.value),onChange:e=>q(V===e.target.value?null:e.target.value)})))})]})}),(0,M.jsx)("div",{className:"appointment-calender",children:(0,M.jsx)(o.Z,{plugins:[i.Z,t.Z,a.ZP],initialView:"dayGridMonth",headerToolbar:{start:"dayGridMonth,timeGridWeek,timeGridDay",center:"prev,title,next",end:""},ref:R,datesSet:()=>(e=>{var l,d,n;Q(null===e||void 0===e||null===(l=e.current)||void 0===l||null===(d=l.calendar)||void 0===d||null===(n=d.currentData)||void 0===n?void 0:n.currentDate)})(R),weekends:!0,events:X,eventContent:e=>{var l,d,n,o,i,t,a,s,v,u,p,r,m,c,f,x,D,g,_,P,A,S,j,I,Y,N;return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("div",{className:"appointment-slot-background",style:{backgroundColor:"Booked"===(null===e||void 0===e||null===(l=e.event)||void 0===l||null===(d=l._def)||void 0===d||null===(n=d.extendedProps)||void 0===n?void 0:n.status)&&(null===(o=h()(null===e||void 0===e||null===(i=e.event)||void 0===i||null===(t=i._def)||void 0===t||null===(a=t.extendedProps)||void 0===a?void 0:a.appointmentDate))||void 0===o?void 0:o.format("YYYY-MM-DD"))>=h()(new Date).format("YYYY-MM-DD")?"#2269F2":"Missed"===(null===e||void 0===e||null===(s=e.event)||void 0===s||null===(v=s._def)||void 0===v||null===(u=v.extendedProps)||void 0===u?void 0:u.status)?"#F26522":"#44BC19"},children:[(0,M.jsx)("b",{children:"".concat(null===e||void 0===e||null===(p=e.event)||void 0===p||null===(r=p._def)||void 0===r||null===(m=r.extendedProps)||void 0===m?void 0:m.appointmentStartTime," - ").concat(null===e||void 0===e||null===(c=e.event)||void 0===c||null===(f=c._def)||void 0===f||null===(x=f.extendedProps)||void 0===x?void 0:x.appointmentEndTime)}),(0,M.jsx)("p",{className:"m-0",children:"Booked"===(null===e||void 0===e||null===(D=e.event)||void 0===D||null===(g=D._def)||void 0===g||null===(_=g.extendedProps)||void 0===_?void 0:_.status)&&(null===(P=h()(null===e||void 0===e||null===(A=e.event)||void 0===A||null===(S=A._def)||void 0===S||null===(j=S.extendedProps)||void 0===j?void 0:j.appointmentDate))||void 0===P?void 0:P.format("YYYY-MM-DD"))>=h()(new Date).format("YYYY-MM-DD")?"Upcoming Appointment":"Missed"===(null===e||void 0===e||null===(I=e.event)||void 0===I||null===(Y=I._def)||void 0===Y||null===(N=Y.extendedProps)||void 0===N?void 0:N.status)?"Missed Appointment":"Completed Appointment"})]})})},height:"80vh",now:null,allDaySlot:!1,slotEventOverlap:!0,eventClick:e=>{se(e.event),ee(!0)},dayMaxEvents:1})}),(0,M.jsxs)(m.Z,{show:$,onHide:()=>{ee(!1)},centered:!0,animation:!1,size:"md",className:"custom-modal",children:[(0,M.jsx)(m.Z.Header,{closeButton:!0,children:(0,M.jsx)(m.Z.Title,{className:"appointment-modal-title",children:"Booked"===(null===ae||void 0===ae||null===(l=ae._def)||void 0===l||null===(d=l.extendedProps)||void 0===d?void 0:d.status)&&(null===(x=h()(null===ae||void 0===ae||null===(P=ae._def)||void 0===P||null===(A=P.extendedProps)||void 0===A?void 0:A.appointmentDate))||void 0===x?void 0:x.format("YYYY-MM-DD"))>=h()(new Date).format("YYYY-MM-DD")?"Upcoming Appointment":"Missed"===(null===ae||void 0===ae||null===(S=ae._def)||void 0===S||null===(j=S.extendedProps)||void 0===j?void 0:j.status)?"Missed Appointment":"Completed Appointment"})}),(0,M.jsxs)(m.Z.Body,{children:[(0,M.jsx)("p",{style:{color:"#1A1A1A",fontWeight:600,fontSize:"18px"},className:"mb-2",children:"Appointment"}),(0,M.jsxs)("p",{style:{color:"#1A1A1A",fontWeight:400,fontSize:"16px"},children:[ve," -"," ",null===(I=h()(null===ae||void 0===ae||null===(Y=ae._def)||void 0===Y||null===(N=Y.extendedProps)||void 0===N?void 0:N.appointmentDate))||void 0===I?void 0:I.format("MMM-D"),". ",null===ae||void 0===ae||null===(T=ae._def)||void 0===T||null===(b=T.extendedProps)||void 0===b?void 0:b.appointmentStartTime," -"," ",null===ae||void 0===ae||null===(y=ae._def)||void 0===y||null===(k=y.extendedProps)||void 0===k?void 0:k.appointmentEndTime]}),(0,M.jsxs)("span",{className:"d-flex align-items-center",children:[(0,M.jsx)("img",{src:f.Z.NEW_PATIENT_GRAY,alt:"new patient icon"}),(0,M.jsx)("p",{className:"mb-0 px-2",style:{color:"#1A1A1A",fontWeight:500,fontSize:"16px"},children:null===ae||void 0===ae||null===(w=ae._def)||void 0===w||null===(Z=w.extendedProps)||void 0===Z?void 0:Z.doctorName})]}),(0,M.jsxs)("span",{children:[(0,M.jsx)("p",{className:"mb-0 mt-4",style:{color:"#999999",fontWeight:500,fontSize:"16px"},children:"Reason:"}),(0,M.jsx)("p",{style:{fontWeight:400,fontSize:"14px",textAlign:"justify"},children:null!==ae&&void 0!==ae&&null!==(C=ae._def)&&void 0!==C&&null!==(E=C.extendedProps)&&void 0!==E&&E.reasonForAppoinment?null===ae||void 0===ae||null===(B=ae._def)||void 0===B||null===(F=B.extendedProps)||void 0===F?void 0:F.reasonForAppoinment:"N/A"})]}),202===(null===ae||void 0===ae||null===(O=ae._def)||void 0===O||null===(U=O.extendedProps)||void 0===U?void 0:U.statusId)&&(0,M.jsx)(c.Z,{className:"w-100 mt-4 bg-dk-purple",onClick:()=>{var e,l;return l=null===ae||void 0===ae||null===(e=ae._def)||void 0===e?void 0:e.extendedProps,void L(v.m.DOCTOR_DETAILS,{state:{appointmentId:null===l||void 0===l?void 0:l.appointmentId}})},children:"Reschedule Appointment"}),202===(null===ae||void 0===ae||null===(W=ae._def)||void 0===W||null===(z=W.extendedProps)||void 0===z?void 0:z.statusId)&&(0,M.jsx)(c.Z,{className:"w-100 mt-4 bg-dk-purple",onClick:()=>{var e,l;return l=null===ae||void 0===ae||null===(e=ae._def)||void 0===e?void 0:e.extendedProps,localStorage.setItem("slotDescription",JSON.stringify(l)),void L(v.m.PATIENT_TELE_CONSULTATION)},children:"Join Appointment"})]})]})]})})}}}]);
//# sourceMappingURL=3962.66645e9c.chunk.js.map