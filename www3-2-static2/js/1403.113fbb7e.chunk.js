"use strict";(self.webpackChunkfamily_doc_app=self.webpackChunkfamily_doc_app||[]).push([[1403],{61403:(e,l,n)=>{n.r(l),n.d(l,{default:()=>M});var o=n(72791),d=n(90575),t=n(38217),i=n(52720),a=n(74332),s=n(41213),v=n(23853),r=n(57689),u=n(11087),p=n(3810),c=n(95070),m=n(1444),x=n(36638),h=n(88135),f=n(43360),g=n(9897),j=n(72426),D=n.n(j),_=n(59434),y=n(24278),N=n(92592),S=n(80184);function b(e){var l,n;return(0,S.jsxs)(h.Z,{show:e.show,onHide:e.onHide,centered:!0,size:"lg",backdrop:"static",children:[(0,S.jsx)(h.Z.Header,{closeButton:!0,children:(0,S.jsx)(h.Z.Title,{children:"Image Preview"})}),(0,S.jsx)(h.Z.Body,{children:(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.imageUrl)&&(0,S.jsx)("div",{className:"py-2",children:(0,S.jsx)(N.Z,{src:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.imageUrl,alt:"Image Preview",className:"uploaded-img-layout"})})}),(0,S.jsx)(h.Z.Footer,{children:(0,S.jsx)(f.Z,{className:"float-end",style:{background:"#000071"},onClick:async()=>{try{const l=await fetch(e.data.imageUrl),n=l.headers.get("Content-Type");if(n&&n.startsWith("image/")){const n=await l.blob(),o=e.data.image.split(".").pop(),d=URL.createObjectURL(n),t=document.createElement("a");t.href=d,t.download="image.".concat(o),document.body.appendChild(t),t.click(),document.body.removeChild(t)}else console.error("Invalid or missing Content-Type header for the image")}catch(l){console.error("Error fetching or downloading the image",l)}},children:"Download Image"})})]})}var w=n(73683);function M(){var e,l,n,j,N,M,P,A,Y,k,I,T,Z,C,E,U,z,F,B,W,H,L,O,R,G,J,Q,V;const q=(0,o.useRef)(),K=(0,_.I0)(),X=JSON.parse(localStorage.getItem("family_doc_app")),$=(0,r.s0)(),[ee,le]=(0,o.useState)(!1),[ne,oe]=(0,o.useState)(),[de,te]=(0,o.useState)(null),[ie,ae]=(0,o.useState)(!1),[se,ve]=(0,o.useState)(!1),[re,ue]=(0,o.useState)(null),[pe,ce]=(0,o.useState)(!1),{allAppointment:me}=(0,_.v9)((e=>e.appointment)),xe=null===me||void 0===me||null===(e=me.data)||void 0===e?void 0:e.map((e=>({appointmentId:null===e||void 0===e?void 0:e.appointmentId,doctorId:null===e||void 0===e?void 0:e.doctorId,doctorName:null===e||void 0===e?void 0:e.doctorName,patientName:null===e||void 0===e?void 0:e.patientName,vonageSessionId:null===e||void 0===e?void 0:e.vonageSessionId,statusId:null===e||void 0===e?void 0:e.statusId,status:null===e||void 0===e?void 0:e.status,imageUrl:null===e||void 0===e?void 0:e.imageUrl,scheduleId:null===e||void 0===e?void 0:e.scheduleId,appointmentDate:null===e||void 0===e?void 0:e.appointmentDate,patientId:null===e||void 0===e?void 0:e.patientId,appointmentStartTime:null===e||void 0===e?void 0:e.appointmentStartTime,appointmentEndTime:null===e||void 0===e?void 0:e.appointmentEndTime,reasonForAppoinment:null===e||void 0===e?void 0:e.reasonForAppoinment,image:null===e||void 0===e?void 0:e.image,start:(0,w.ju)(null===e||void 0===e?void 0:e.appointmentDate,null===e||void 0===e?void 0:e.appointmentStartTime)})));(0,o.useEffect)((()=>{if(re){var e,l,n,o;let d=D()(new Date),t=new Date("".concat(D()(null===re||void 0===re||null===(e=re._def)||void 0===e||null===(l=e.extendedProps)||void 0===l?void 0:l.appointmentDate).format("YYYY-MM-DD"),"T").concat(D()(null===re||void 0===re||null===(n=re._def)||void 0===n||null===(o=n.extendedProps)||void 0===o?void 0:o.appointmentStartTime,"hh:mm A").format("HH:mm:ss"))),i=D().duration(D()(t).diff(d)).asMinutes();ve(i<10&&i>-15)}else ve(!1)}),[re]);const he=function(){var e,l;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date(null===re||void 0===re||null===(e=re._def)||void 0===e||null===(l=e.extendedProps)||void 0===l?void 0:l.appointmentDate),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return null===n||void 0===n?void 0:n.toLocaleDateString(o,{weekday:"long"})}();(0,o.useEffect)((()=>{const e={doctorId:null===X||void 0===X?void 0:X.userId,month:+D()(ne).format("M"),statusId:"205"===de?205:"204"===de?204:"206"===de?206:"203"===de?203:"201"===de?201:null};K((0,y.Qe)(e))}),[K,ne,null===X||void 0===X?void 0:X.userId,de]);const fe=null===re||void 0===re||null===(l=re._def)||void 0===l||null===(n=l.extendedProps)||void 0===n?void 0:n.image,ge=null===fe||void 0===fe?void 0:fe.split("_")[1];let je,De;ge&&ge.includes(".pdf")?je=ge:De=ge;return(0,S.jsx)(c.Z,{className:"custom-full-calendar",children:(0,S.jsxs)(c.Z.Body,{style:{borderRadius:"12px"},className:"fc-header-dropdown",children:[(0,S.jsxs)(m.Z,{show:pe,onToggle:()=>{ce(!pe)},children:[(0,S.jsx)(m.Z.Toggle,{variant:"success",id:"dropdown-basic",children:"Appointments"}),(0,S.jsx)(m.Z.Menu,{className:"mt-2",children:[{label:"Missed",value:205},{label:"Upcoming",value:204},{label:"Completed",value:206},{label:"Cancelled",value:203},{label:"Pending",value:201}].map((e=>(0,S.jsx)(x.Z.Check,{type:"checkbox",id:e.value,label:e.label,value:e.value,checked:null===de||void 0===de?void 0:de.includes(e.value),onChange:e=>te(de===e.target.value?null:e.target.value)})))})]}),(0,S.jsx)("div",{className:"appointment-calender",children:(0,S.jsx)(d.Z,{plugins:[t.Z,i.Z,a.ZP],initialView:"dayGridMonth",headerToolbar:{start:"dayGridMonth,timeGridWeek,timeGridDay",center:"prev,title,next",end:""},ref:q,datesSet:()=>(e=>{var l,n,o;oe(null===e||void 0===e||null===(l=e.current)||void 0===l||null===(n=l.calendar)||void 0===n||null===(o=n.currentData)||void 0===o?void 0:o.currentDate)})(q),weekends:!0,events:xe,eventContent:e=>{var l,n,o,d,t,i,a,s,v,r,u,p,c,m,x,h,f,g,j,_,y,N,b,w,M,P;return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:"appointment-slot-background",style:{backgroundColor:"Booked"===(null===e||void 0===e||null===(l=e.event)||void 0===l||null===(n=l._def)||void 0===n||null===(o=n.extendedProps)||void 0===o?void 0:o.status)&&(null===(d=D()(null===e||void 0===e||null===(t=e.event)||void 0===t||null===(i=t._def)||void 0===i||null===(a=i.extendedProps)||void 0===a?void 0:a.appointmentDate))||void 0===d?void 0:d.format("YYYY-MM-DD"))>=D()(new Date).format("YYYY-MM-DD")?"#2269F2":"Missed"===(null===e||void 0===e||null===(s=e.event)||void 0===s||null===(v=s._def)||void 0===v||null===(r=v.extendedProps)||void 0===r?void 0:r.status)?"#F26522":"#44BC19"},children:[(0,S.jsx)("b",{children:"".concat(null===e||void 0===e||null===(u=e.event)||void 0===u||null===(p=u._def)||void 0===p||null===(c=p.extendedProps)||void 0===c?void 0:c.appointmentStartTime," - ").concat(null===e||void 0===e||null===(m=e.event)||void 0===m||null===(x=m._def)||void 0===x||null===(h=x.extendedProps)||void 0===h?void 0:h.appointmentEndTime)}),(0,S.jsx)("p",{className:"m-0",children:"Booked"===(null===e||void 0===e||null===(f=e.event)||void 0===f||null===(g=f._def)||void 0===g||null===(j=g.extendedProps)||void 0===j?void 0:j.status)&&(null===(_=D()(null===e||void 0===e||null===(y=e.event)||void 0===y||null===(N=y._def)||void 0===N||null===(b=N.extendedProps)||void 0===b?void 0:b.appointmentDate))||void 0===_?void 0:_.format("YYYY-MM-DD"))>=D()(new Date).format("YYYY-MM-DD")?"Upcoming Appointment":"Missed"===(null===e||void 0===e||null===(w=e.event)||void 0===w||null===(M=w._def)||void 0===M||null===(P=M.extendedProps)||void 0===P?void 0:P.status)?"Missed Appointment":"Completed Appointment"})]})})},height:"80vh",now:null,allDaySlot:!1,slotEventOverlap:!0,eventClick:e=>{ue(e.event),ae(!0)},dayMaxEvents:1,nowIndicator:!1,selectable:!0,selectMirror:!0,editable:!0})}),(0,S.jsxs)(h.Z,{show:ie,onHide:()=>{ae(!1)},centered:!0,animation:!1,size:"lg",className:"custom-modal",children:[(0,S.jsx)(h.Z.Header,{closeButton:!0,children:(0,S.jsx)(h.Z.Title,{className:"appointment-modal-title",children:"Booked"===(null===re||void 0===re||null===(j=re._def)||void 0===j||null===(N=j.extendedProps)||void 0===N?void 0:N.status)&&(null===(M=D()(null===re||void 0===re||null===(P=re._def)||void 0===P||null===(A=P.extendedProps)||void 0===A?void 0:A.appointmentDate))||void 0===M?void 0:M.format("YYYY-MM-DD"))>=D()(new Date).format("YYYY-MM-DD")?"Upcoming Appointment":"Missed"===(null===re||void 0===re||null===(Y=re._def)||void 0===Y||null===(k=Y.extendedProps)||void 0===k?void 0:k.status)?"Missed Appointment":"Completed Appointment"})}),(0,S.jsxs)(h.Z.Body,{children:[(0,S.jsx)("p",{style:{color:"#1A1A1A",fontWeight:600,fontSize:"18px"},className:"mb-2",children:"Appointment"}),(0,S.jsxs)("p",{style:{color:"#1A1A1A",fontWeight:400,fontSize:"16px"},children:[he," -"," ",null===(I=D()(null===re||void 0===re||null===(T=re._def)||void 0===T||null===(Z=T.extendedProps)||void 0===Z?void 0:Z.appointmentDate))||void 0===I?void 0:I.format("MMM-D"),". ",null===re||void 0===re||null===(C=re._def)||void 0===C||null===(E=C.extendedProps)||void 0===E?void 0:E.appointmentStartTime," -"," ",null===re||void 0===re||null===(U=re._def)||void 0===U||null===(z=U.extendedProps)||void 0===z?void 0:z.appointmentEndTime]}),(0,S.jsx)("div",{className:"pt-3 w-100",children:(0,S.jsxs)("span",{className:"d-flex",onClick:()=>{ae(!1),le(!0)},children:[(0,S.jsx)(s.xbJ,{style:{color:"#FD2121"},size:20}),je?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.rU,{to:null===re||void 0===re||null===(F=re._def)||void 0===F||null===(B=F.extendedProps)||void 0===B?void 0:B.imageUrl,target:"_blank",className:"px-2 custom-text-ellipsis text-link",children:je}),(0,S.jsx)(v._hL,{style:{color:"#000071",fontWeight:500,fontSize:"16px"},size:18})]}):De?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("p",{className:"px-2 custom-text-ellipsis text-cursor-pointer",children:De}),(0,S.jsx)(v._hL,{style:{color:"#000071",fontWeight:500,fontSize:"16px"},size:18})]}):(0,S.jsx)("p",{className:"px-2",style:{fontSize:"16px"},children:"No Doc Found"})]})}),(0,S.jsxs)("span",{className:"d-flex align-items-center",children:[(0,S.jsx)("img",{src:g.Z.NEW_PATIENT_GRAY,alt:"new patient icon"}),(0,S.jsx)("p",{className:"mb-0 px-2",style:{color:"#1A1A1A",fontWeight:500,fontSize:"16px"},children:null===re||void 0===re||null===(W=re._def)||void 0===W||null===(H=W.extendedProps)||void 0===H?void 0:H.patientName})]}),(0,S.jsxs)("span",{children:[(0,S.jsx)("p",{className:"mb-0 mt-4",style:{color:"#999999",fontWeight:500,fontSize:"16px"},children:"Reason:"}),(0,S.jsx)("p",{style:{fontWeight:400,fontSize:"14px",textAlign:"justify"},children:null!==re&&void 0!==re&&null!==(L=re._def)&&void 0!==L&&null!==(O=L.extendedProps)&&void 0!==O&&O.reasonForAppoinment?null===re||void 0===re||null===(R=re._def)||void 0===R||null===(G=R.extendedProps)||void 0===G?void 0:G.reasonForAppoinment:"N/A"})]}),"Booked"===(null===re||void 0===re||null===(J=re._def)||void 0===J||null===(Q=J.extendedProps)||void 0===Q?void 0:Q.status)&&(0,S.jsx)(f.Z,{className:"w-100 mt-4 bg-dk-purple",onClick:()=>{var e,l;return l=null===re||void 0===re||null===(e=re._def)||void 0===e?void 0:e.extendedProps,localStorage.setItem("slotDescription",JSON.stringify(l)),void $(p.m.TELE_CONSULTATION)},children:"Join Appointment"})]})]}),De&&(0,S.jsx)(b,{show:ee,onHide:()=>le(!1),data:null===re||void 0===re||null===(V=re._def)||void 0===V?void 0:V.extendedProps})]})})}}}]);
//# sourceMappingURL=1403.113fbb7e.chunk.js.map