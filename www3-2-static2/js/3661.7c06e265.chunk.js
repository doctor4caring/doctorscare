"use strict";(self.webpackChunkfamily_doc_app=self.webpackChunkfamily_doc_app||[]).push([[3661],{52268:(e,o,t)=>{t.d(o,{Tf:()=>s,_Y:()=>a,bA:()=>n,lt:()=>i,sP:()=>l});const n=[{lookupId:6,value:"Nurse"},{lookupId:7,value:"Receptionist"}],l=[{lookupId:101,value:"Male"},{lookupId:102,value:"Female"},{lookupId:103,value:"Other"}],s={Destroyed:"destroyed",Error:"error",Incoming:"incoming",Registered:"registered",Registering:"registering",TokenWillExpire:"tokenWillExpire",Unregistered:"unregistered"},i={Connected:"connected",Accept:"accept",Audio:"audio",Cancel:"cancel",Disconnect:"disconnect",Error:"error",Mute:"mute",Reconnected:"reconnected",Reconnecting:"reconnecting",Reject:"reject",Ringing:"ringing",Sample:"sample",Volume:"volume",WarningCleared:"warning-cleared",Warning:"warning"},a=[{lookupId:401,name:"Multiple Choice",value:"Radio"},{lookupId:402,name:"Checkbox",value:"Checkbox"},{lookupId:404,name:"Paragraph",value:"TextBox"}]},23661:(e,o,t)=>{t.r(o),t.d(o,{default:()=>C});var n=t(72791),l=t(95070),s=t(36638),i=t(89743),a=t(2677),c=t(43360),r=t(16856),d=t(30203),p=t(78820),m=t(61134),u=t(59434),x=t(7692),h=t(57689),v=t(3810),g=t(52268),j=t(79243),f=t(80184);const C=function(){var e;const{handleSubmit:o,register:t}=(0,m.cI)(),[C,b]=(0,n.useState)("401"),[y,A]=(0,n.useState)([{question:"",options:[""],selectedType:"401"}]),[w,k]=(0,n.useState)(!1),{adminOnlinePrescripionForm:N}=(0,u.v9)((e=>null===e||void 0===e?void 0:e.onlinePrescriptionForm));console.log("adminOnlinePrescripionForm",N),console.log("sections",y);const I=(0,h.s0)(),T=(0,u.I0)(),S=JSON.parse(localStorage.getItem("family_doc_app"));let Z=new URLSearchParams(window.location.search).get("disease");const F=()=>{A([...y,{question:"",options:[""],selectedType:"401"}])},R=e=>{const o=[...y];o[e].options=[...y[e].options,""],A(o)},q=(e,o,t)=>{const n=[...y];n[e].options[o]=t,A(n)},E=(e,o)=>{const t=[...y];t[e].options.splice(o,1),A(t)};function L(){1===(null===S||void 0===S?void 0:S.roleId)?I(v.m.SUPERADMIN_FORMS):4===(null===S||void 0===S?void 0:S.roleId)&&I(v.m.ADMIN_FORMS);T((0,j.LB)({Search:""}))}return(0,n.useEffect)((()=>{const e={formId:Z};T((0,j.Pw)(e))}),[T,Z]),(0,n.useEffect)((()=>{var e,o;Z&&N&&(A([]),null===N||void 0===N||null===(e=N.data)||void 0===e||null===(o=e.formQuestionList)||void 0===o||o.map(((e,o)=>{const t={question:e.question,options:e.formAnswersList,selectedType:e.answerTypeId.toString()};return A((e=>[...e,t]))})))}),[Z,N]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h5",{children:"Questionnaires"}),(0,f.jsx)(l.Z,{className:"shadow-sm custom-questionnaires",children:(0,f.jsx)(s.Z,{onSubmit:o((function(e){const o={formId:0,title:null===e||void 0===e?void 0:e.title,isActive:!0,formQuestionList:y.map(((e,o)=>({questionId:0,question:null===e||void 0===e?void 0:e.question,answerTypeId:null===e||void 0===e?void 0:e.selectedType,answerTypeName:"401"===(null===e||void 0===e?void 0:e.selectedType)?"Radio":"402"===(null===e||void 0===e?void 0:e.selectedType)?"Checkbox":"404"===(null===e||void 0===e?void 0:e.selectedType)?"TextBox":"",formId:0,formAnswersList:e.options.map(((e,o)=>({formAnswereId:0,formQuestionId:0,answerLabel:e||"Answer Text"})))})))};T((0,j.mh)({finalData:o,onCreateSuccess:L}))})),children:(0,f.jsxs)(i.Z,{className:"m-3 d-flex justify-content-center flex-column",children:[(0,f.jsxs)(a.Z,{xl:7,lg:10,xs:12,className:"mx-auto mb-3 p-0",children:[(0,f.jsxs)(s.Z.Group,{className:"px-3 pt-2 pb-4 rounded mb-3",controlId:"formTitle",style:{boxShadow:"0px 0px 24px 0px #0000000A",borderTop:"6px solid #6045EB"},children:[(0,f.jsx)(s.Z.Label,{className:"mt-2",children:"Enter Form Title"}),(0,f.jsx)(s.Z.Control,{type:"text",placeholder:"Form Title",maxLength:250,...t("title",{required:!0}),disabled:Z&&!w,defaultValue:Z?null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.title:""})]}),0===(null===y||void 0===y?void 0:y.length)?(0,f.jsx)(c.Z,{variant:"primary",type:"button",className:"Admin-Add-btn px-3 float-end",children:(0,f.jsx)(d.wEH,{size:24,onClick:F})}):Z&&!w?(0,f.jsxs)(c.Z,{variant:"primary",type:"button",className:"Admin-Add-btn px-3 float-end",onClick:()=>{k(!0)},children:[(0,f.jsx)(x.Hlf,{size:24})," ","Edit"]}):""]}),y.map(((e,o)=>(0,f.jsxs)(a.Z,{xl:7,lg:10,xs:12,className:"p-3 rounded mx-auto mb-3",style:{boxShadow:"0px 0px 24px 0px #0000000A",borderLeft:"6px solid #3F8BFC"},children:[(0,f.jsxs)(s.Z.Group,{className:"mb-3",controlId:"formQuestion".concat(o),children:[(0,f.jsxs)("div",{className:"d-flex justify-content-between flex-wrap align-items-center custom-col-rev mb-2",children:[(0,f.jsx)(s.Z.Label,{className:"text-w-full",children:"Enter Question"}),(0,f.jsx)(a.Z,{xl:5,sm:6,xs:12,children:(0,f.jsx)(s.Z.Select,{"aria-label":"Select Type",onChange:e=>{((e,o)=>{b(e.target.value);const t=[...y];t[o].selectedType=e.target.value,A(t)})(e,o)},defaultValue:(null===e||void 0===e?void 0:e.selectedType)||C,children:g._Y.map((e=>(0,f.jsx)("option",{value:null===e||void 0===e?void 0:e.lookupId,children:e.name})))})})]}),(0,f.jsx)(s.Z.Control,{type:"text",placeholder:"Question",required:!0,maxLength:250,value:null===e||void 0===e?void 0:e.question,onChange:e=>((e,o)=>{const t=[...y];t[e].question=o,A(t)})(o,e.target.value)}),(0,f.jsxs)("div",{className:"mt-2 questionnaires-option",children:["401"===(null===e||void 0===e?void 0:e.selectedType)&&(0,f.jsxs)(f.Fragment,{children:[e.options.map(((e,t)=>(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsx)(s.Z.Check,{label:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(s.Z.Control,{type:"text",placeholder:"Add option",className:"border-0 ms-2",value:e,onChange:e=>q(o,t,e.target.value)})}),name:"group".concat(o),type:"radio",id:"radio-".concat(t),className:"d-flex align-items-center mb-1 w-100"}),(0,f.jsx)("span",{className:"mx-3",children:(0,f.jsx)(p.oHP,{size:18,onClick:()=>E(o,t)})})]},"radio-".concat(t)))),(0,f.jsx)("span",{className:"text-cursor-pointer text-decoration-underline",style:{color:"#3F8BFC",fontSize:"0.9em"},onClick:()=>R(o),children:"Add another option"})]}),"404"===(null===e||void 0===e?void 0:e.selectedType)&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(s.Z.Control,{as:"textarea",rows:3,placeholder:"Answer Text",className:"mt-2",disabled:!0})}),"402"===(null===e||void 0===e?void 0:e.selectedType)&&(0,f.jsxs)(f.Fragment,{children:[e.options.map(((e,t)=>(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsx)(s.Z.Check,{label:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(s.Z.Control,{type:"text",placeholder:"Add option",className:"border-0 ms-2",value:e,onChange:e=>q(o,t,e.target.value)})}),name:"group".concat(o),type:"checkbox",id:"checkbox-".concat(t),className:"d-flex align-items-center mb-1 w-100"}),(0,f.jsx)("span",{className:"mx-3",children:(0,f.jsx)(p.oHP,{size:18,onClick:()=>E(o,t)})})]},"checkbox-".concat(t)))),(0,f.jsx)("span",{className:"text-cursor-pointer text-decoration-underline",style:{color:"#3F8BFC",fontSize:"0.9em"},onClick:()=>R(o),children:"Add another option"})]})]})]}),(0,f.jsxs)("div",{className:"w-100 d-flex flex-wrap justify-content-end",children:[(0,f.jsx)("span",{style:{borderRight:"1px solid #CACACA"},children:(0,f.jsx)(d.wEH,{size:24,color:"#CACACA",className:"mx-2 text-cursor-pointer","data-toggle":"tooltip","data-placement":"top",title:"Add Question",onClick:F})}),(0,f.jsx)("span",{className:"me-2",style:{borderRight:"1px solid #CACACA"},children:(0,f.jsx)(r.I0,{size:26,color:"#CACACA",className:"mx-2 text-cursor-pointer","data-toggle":"tooltip","data-placement":"top",title:"Delete",onClick:()=>(e=>{const o=[...y];o.splice(e,1),A(o)})(o)})}),(0,f.jsx)(s.Z.Check,{type:"switch",id:"custom-switch-".concat(o),label:"Active",...t("isActive"),defaultChecked:!0,onChange:e=>{((e,o)=>{console.log("Switch in section ".concat(e," is now ").concat(o))})(o,e.target.checked)}})]})]},o))),0!==(null===y||void 0===y?void 0:y.length)&&(0,f.jsx)(a.Z,{children:(0,f.jsx)(c.Z,{variant:"primary",type:"submit",className:"Admin-Add-btn fw-bold float-end",children:"Save"})})]})})})]})}}}]);
//# sourceMappingURL=3661.7c06e265.chunk.js.map