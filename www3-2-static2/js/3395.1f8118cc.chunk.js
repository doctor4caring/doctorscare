"use strict";(self.webpackChunkfamily_doc_app=self.webpackChunkfamily_doc_app||[]).push([[3395],{43426:(e,s,i)=>{i.d(s,{Z:()=>a});i(72791);var t=i(95070),n=i(72426),o=i.n(n),l=i(80184);function a(e){const{name:s,genderInfo:i,gender:n,dobInfo:a,dob:d,professionInfo:r,profession:c,currentLocationInfo:h,currentLocation:p,patientLocalGPInfo:u,patientLocalGP:m,emailInfo:v,email:x,phoneInfo:j,phone:N,specialityInfo:f,speciality:y,pharmacyInfo:b,pharmacy:g,locationInfo:w,location:S,image:A}=e;return(0,l.jsx)(t.Z,{className:"generic-card border__radius-10",children:(0,l.jsxs)(t.Z.Body,{className:"p-0 main-personalprofile position-relative",children:[(0,l.jsx)("div",{className:"ds-top"}),(0,l.jsxs)("div",{className:"position-relative",children:[(0,l.jsx)("div",{className:"avatar-holder upload_pic profile_upload profileContent",children:(0,l.jsx)("img",{src:A||"https://ui-avatars.com/api/?name=".concat("".concat(s),"&background=000071&color=fff"),alt:"Patient"})}),(0,l.jsx)("div",{className:"name",children:s||"N/A"})]}),(0,l.jsxs)("div",{className:"mx-4 card-content patient-personal-details",children:[i&&(0,l.jsxs)(l.Fragment,{children:[" ",(0,l.jsxs)("span",{className:"d-flex flex-wrap justify-content-between pt-3",children:[(0,l.jsx)("p",{children:"Gender"}),(0,l.jsx)("p",{children:n||"N/A"})]}),(0,l.jsx)("hr",{})]}),a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"d-flex flex-wrap justify-content-between",children:[(0,l.jsx)("p",{children:"D.O.B"}),(0,l.jsx)("p",{children:o()(d).format("MM/DD/YYYY")})]}),(0,l.jsx)("hr",{})]}),w&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"d-flex flex-wrap justify-content-between",children:[(0,l.jsx)("p",{children:"Location"}),(0,l.jsx)("p",{children:S||"N/A"})]}),(0,l.jsx)("hr",{})]}),r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"d-flex flex-wrap justify-content-between",children:[(0,l.jsx)("p",{children:"Profession/Occupation:"}),(0,l.jsx)("p",{children:c||"N/A"})]}),(0,l.jsx)("hr",{})]}),h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"d-flex flex-wrap justify-content-between",children:[(0,l.jsx)("p",{children:"Current Location"}),(0,l.jsx)("p",{children:p||"N/A"})]}),(0,l.jsx)("hr",{})]}),u&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"d-flex flex-wrap justify-content-between",children:[(0,l.jsx)("p",{children:"Patient Local GP"}),(0,l.jsx)("p",{children:m||"N/A"})]}),(0,l.jsx)("hr",{})]}),v&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"d-flex flex-wrap justify-content-between",children:[(0,l.jsx)("p",{children:"Email"}),(0,l.jsx)("p",{children:x||"N/A"})]}),(0,l.jsx)("hr",{})]}),b&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"d-flex flex-wrap justify-content-between",children:[(0,l.jsx)("p",{children:"Pharmacy"}),(0,l.jsx)("p",{children:g||"N/A"})]}),(0,l.jsx)("hr",{})]}),j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"d-flex flex-wrap justify-content-between",children:[(0,l.jsx)("p",{children:"Phone"}),(0,l.jsx)("p",{children:N||"N/A"})]}),(0,l.jsx)("hr",{})]}),f&&(0,l.jsxs)("span",{className:"d-flex flex-wrap justify-content-between",children:[(0,l.jsx)("p",{children:"Speciality"}),(0,l.jsx)("p",{children:y||"N/A"})]})]})]})})}},3395:(e,s,i)=>{i.r(s),i.d(s,{default:()=>H});var t=i(72791),n=i(89743),o=i(2677),l=i(95070),a=i(19485),d=i(61734),r=i(69764),c=i(20240),h=i(56355),p=i(78820),u=i(43360),m=i(88135),v=i(3810),x=i(57689),j=i(80184);const N=function(e){const{showEndModal:s,handleCloseEndModal:i,discounthandler:t}=e,n=(0,x.s0)();return(0,j.jsx)("div",{children:(0,j.jsxs)(m.Z,{show:s,onHide:i,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"appointment-modal",children:[(0,j.jsx)(m.Z.Header,{closeButton:!0}),(0,j.jsxs)(m.Z.Body,{children:[(0,j.jsx)("div",{className:"d-flex justify-content-center ",children:(0,j.jsx)("span",{className:"stethoscope-icon",children:(0,j.jsx)(h.K7y,{size:34})})}),(0,j.jsxs)("div",{className:"my-3",children:[(0,j.jsx)("h4",{className:"text-center w-50 mx-auto my-0",style:{fontWeight:600},children:"You are about to end this appointment"}),(0,j.jsx)("p",{className:"text-center mt-3 mb-4",children:"Note: If you end this appointment, you will not be able to reconnect"})]}),(0,j.jsx)("span",{className:"d-flex justify-content-center mt-2 mb-5",children:(0,j.jsx)(u.Z,{className:"end-apt-btn",onClick:()=>(n(v.m.PATIENT_APPOINTMENTDETAILS),i(),void t()),children:"End Appointment"})})]})]})})};class f extends t.Component{constructor(e){var s,i;super(e),this.setAudio=e=>{this.setState({audio:e})},this.setVideo=e=>{this.setState({video:e})},this.setShowEndModal=e=>{this.setState({showEndModal:e})},this.onError=e=>{this.setState({error:"Failed to publish: ".concat(e.message)})},this.discounthandler=async()=>{var e,s,i,t;await(null===(e=this.props)||void 0===e||null===(s=e.otSession)||void 0===s||null===(i=s.current)||void 0===i||null===(t=i.sessionHelper)||void 0===t?void 0:t.session.destroy())},this.discounthandlerEnd=async()=>{var e,s,i,t;await(null===(e=this.props)||void 0===e||null===(s=e.otSession)||void 0===s||null===(i=s.current)||void 0===i||null===(t=i.sessionHelper)||void 0===t?void 0:t.session.destroy())},this.state={error:null,audio:!0,video:(null===(s=this.props.videoCallData)||void 0===s||!s.isAudio)&&(null!==(i=this.props.videoCallData)&&void 0!==i&&i.isVideo,!0),showEndModal:!1,videoSource:"camera"}}render(){return(0,j.jsxs)("div",{className:"videocall publisher",children:[(0,j.jsxs)("div",{className:"d-flex justify-content-end me-3 position-relative publisher-video-box",children:[(0,j.jsx)("div",{children:(0,j.jsx)(c.VI,{properties:{publishAudio:this.state.audio,publishVideo:this.state.video,videoSource:"screen"===this.state.videoSource?"screen":void 0}})}),(0,j.jsxs)("div",{className:"position-absolute d-flex justify-content-between align-items-center",style:{right:"1rem",top:"8.8rem",width:"fit-content"},children:[(0,j.jsx)("div",{className:"publisher-name",children:(0,j.jsx)("h6",{className:"text-white mb-0",children:this.props.user.name})}),!1===this.state.audio&&(0,j.jsx)("div",{className:"publisher-mute",children:(0,j.jsx)(p.Q4c,{className:"strem--controls-icon cursor m-2 text-white",size:20,onClick:()=>this.setAudio(!1)})})]})]}),(0,j.jsx)("div",{className:"row mt-5 mx-2",children:(0,j.jsx)("div",{className:"randox-div",children:(0,j.jsx)("div",{className:"position_set",children:(0,j.jsxs)("div",{className:"d-flex justify-content-between streem-control-container w-100",children:[(0,j.jsxs)("div",{children:[this.state.audio?(0,j.jsx)("span",{className:"botton-icons me-4",onClick:()=>this.setAudio(!1),children:(0,j.jsx)(p.aRZ,{className:"strem--controls-icon cursor m-2",size:24,onClick:()=>this.setAudio(!1)})}):(0,j.jsx)("span",{className:"botton-icons me-4",onClick:()=>this.setAudio(!0),children:(0,j.jsx)(p.Q4c,{className:"strem--controls-icon cursor m-2",size:24,onClick:()=>this.setAudio(!0)})}),this.state.video?(0,j.jsx)("span",{className:"botton-icons me-4",onClick:()=>this.setVideo(!1),children:(0,j.jsx)(h.KoQ,{className:"strem--controls-icon cursor m-2",size:24,onClick:()=>this.setVideo(!1)})}):(0,j.jsx)("span",{className:"botton-icons me-4",onClick:()=>this.setVideo(!0),children:(0,j.jsx)(h.uCi,{className:"strem--controls-icon cursor m-2",size:24,onClick:()=>this.setVideo(!0)})})]}),(0,j.jsxs)("span",{className:"appointment-last-span",children:[this.props.user&&this.props.user&&this.props.user.token&&"Doctor"===this.props.user.role&&(0,j.jsx)("div",{className:"end_call",children:(0,j.jsx)(u.Z,{style:{background:"#FD2121",border:"none"},onClick:()=>this.setShowEndModal(!0),className:"px-4",children:"End Appointment"})}),this.props.user&&this.props.user&&this.props.user.token&&"Patient"===this.props.user.role&&(0,j.jsx)("div",{className:"end_call",children:(0,j.jsx)(u.Z,{style:{background:"#FD2121",border:"none"},onClick:()=>this.setShowEndModal(!0),className:"px-4",children:"End Appointment"})})]})]})})})}),(0,j.jsx)(N,{showEndModal:this.state.showEndModal,handleCloseEndModal:()=>this.setShowEndModal(!1),discounthandler:async()=>{this.discounthandler()},videoCallData:this.props.videoCallData})]})}}const y=f;class b extends t.Component{constructor(e){super(e),this.setAudio=e=>{this.setState({audio:e})},this.setVideo=e=>{this.setState({video:e})},this.onError=e=>{this.setState({error:"Failed to subscribe: ".concat(e.message)})},this.state={error:null,audio:!0,video:!0}}render(){var e,s,i;return(0,j.jsx)("div",{className:"subscriber",children:(0,j.jsxs)("div",{className:"position-relative",children:[(0,j.jsx)("div",{children:(0,j.jsx)(c.dR,{properties:{subscribeToAudio:this.state.audio,subscribeToVideo:this.state.video}})}),(0,j.jsx)("div",{className:"publisher__name-section",children:(0,j.jsx)("div",{className:"publisher-name",children:(0,j.jsx)("h6",{className:"text-white mb-0",children:null===(e=this.props)||void 0===e||null===(s=e.videoCallData)||void 0===s||null===(i=s.doctor)||void 0===i?void 0:i.name})})})]})})}}const g=b;var w=i(58617);class S extends t.Component{constructor(e){super(e),this.onSignalRecieve=e=>{console.log("onSignalReceive => ",JSON.parse(e.data))},this.onError=e=>{this.setState({error:"Failed to connect: ".concat(e.message)})},this.otSession=t.createRef(),this.state={error:null,connected:!1},this.sessionEvents={sessionConnected:()=>{this.setState({connected:!0})},sessionDisconnected:()=>{this.setState({connected:!1})}}}render(){var e,s,i,t,n,o,l,a,d,r,h,p,u,m,v,x;return(0,j.jsxs)(c.Bp,{ref:null===this||void 0===this?void 0:this.otSession,apiKey:"47602941",sessionId:null===this||void 0===this||null===(e=this.props)||void 0===e||null===(s=e.videoCallData)||void 0===s?void 0:s.vonageSessionId,token:null===(i=this.props)||void 0===i||null===(t=i.videoCallData)||void 0===t?void 0:t.token,eventHandlers:null===this||void 0===this?void 0:this.sessionEvents,onError:null===this||void 0===this?void 0:this.onError,children:[this.state.error?(0,j.jsx)("div",{id:"error",children:this.state.error}):null,(0,j.jsxs)("div",{className:"position-relative w-100",children:[0===(null===this||void 0===this||null===(n=this.otSession)||void 0===n||null===(o=n.current)||void 0===o||null===(l=o.state)||void 0===l||null===(a=l.streams)||void 0===a?void 0:a.length)&&(0,j.jsx)(C,{show:null===this||void 0===this||null===(d=this.otSession)||void 0===d||null===(r=d.current)||void 0===r||null===(h=r.state)||void 0===h||null===(p=h.streams)||void 0===p?void 0:p.length,session:null===this||void 0===this?void 0:this.otSession}),(0,j.jsx)(c.e_,{children:(0,j.jsx)(g,{videoCallData:null===(u=this.props)||void 0===u?void 0:u.videoCallData})}),(0,j.jsx)(y,{user:null===this||void 0===this||null===(m=this.props)||void 0===m?void 0:m.user,setShowEndModal:null===(v=this.props)||void 0===v?void 0:v.setShowEndModal,otSession:null===this||void 0===this?void 0:this.otSession,videoCallData:null===(x=this.props)||void 0===x?void 0:x.videoCallData})]})]})}}const A=(0,c.kK)(S);function C(e){var s,i,n;let{session:o}=e;const[l,a]=(0,t.useState)();return(0,t.useEffect)((()=>{var e,s,i;a(null===o||void 0===o||null===(e=o.current)||void 0===e||null===(s=e.state)||void 0===s||null===(i=s.streams)||void 0===i?void 0:i.length)}),[null===o||void 0===o||null===(s=o.current)||void 0===s||null===(i=s.state)||void 0===i||null===(n=i.streams)||void 0===n?void 0:n.length]),(0,j.jsx)("div",{className:"video-appointment abcd ".concat(0===l?"d-block":"d-none"),children:(0,j.jsxs)("div",{className:"d-flex align-items-center justify-content-center h-100",children:[(0,j.jsx)(w.HQH,{className:"exclamation-icon me-2 mb-3",size:28}),(0,j.jsx)("p",{className:"not-joined-text m-0",style:{fontWeight:600},children:"The Doctor has not yet joined the appointment"})]})})}function I(e){const{videoCallData:s}=e,i=JSON.parse(localStorage.getItem("family_doc_app")),[n,o]=(0,t.useState)(2),[l,a]=(0,t.useState)(!1);return(0,j.jsx)(j.Fragment,{children:2===n&&(0,j.jsx)("div",{className:"appointment-started",children:(0,j.jsx)(A,{videoCallData:s,user:i,setShowEndModal:a})})})}var E=i(43426),D=i(21334),Z=i(59434),k=i(24278),M=i(82573);function H(){var e,s,i,c,h,p,u,m,v;const x=JSON.parse(localStorage.getItem("slotDescription")),N=(0,Z.I0)(),{videoCallData:f,isLoading:y}=(0,Z.v9)((e=>e.vonageData)),{doctorAppointedDetail:b}=(0,Z.v9)((e=>e.appointment)),{patientPharmacyData:g}=(0,Z.v9)((e=>null===e||void 0===e?void 0:e.patientPharmacy)),{user:w}=(0,Z.v9)((e=>e.auth)),S=()=>{const e={appointmentId:null===x||void 0===x?void 0:x.appointmentId};N((0,k.MM)(e))};return(0,t.useEffect)((()=>{const e={sessionId:null===x||void 0===x?void 0:x.vonageSessionId};N((0,D.sR)({finalData:e,moveToNext:S}))}),[N,null===x||void 0===x?void 0:x.vonageSessionId]),(0,t.useEffect)((()=>{const e={PatientId:null===w||void 0===w?void 0:w.userId};N((0,M.jX)(e))}),[N,null===w||void 0===w?void 0:w.userId]),(0,t.useEffect)((()=>{const e={doctorId:null===x||void 0===x?void 0:x.doctorId};N((0,k.tW)(e))}),[N,null===x||void 0===x?void 0:x.doctorId]),(0,j.jsx)("div",{className:"p-4 consultation-main vh-100",children:(0,j.jsxs)(n.Z,{className:"gy-3 h-100",children:[(0,j.jsx)(o.Z,{xl:3,lg:4,md:4,xs:12,className:"h-100 generic-h100",children:(0,j.jsx)(E.Z,{name:"".concat(null===b||void 0===b||null===(e=b.doctorDetail)||void 0===e?void 0:e.firstName," ").concat(null===b||void 0===b||null===(s=b.doctorDetail)||void 0===s?void 0:s.lastName),image:null===b||void 0===b||null===(i=b.doctorDetail)||void 0===i?void 0:i.imageUrl})}),(0,j.jsx)(o.Z,{xl:6,lg:8,md:8,xs:12,className:"bg-white px-0 border__radius-10",style:{height:"50rem"},children:(0,j.jsx)(l.Z,{className:"tele-consultation-tabs",children:(0,j.jsx)(l.Z.Body,{className:"p-0",children:(0,j.jsx)(a.Z,{defaultActiveKey:"videoAppointment",id:"uncontrolled-tab-example",className:"Tabs-Bordered",children:(0,j.jsx)(d.Z,{eventKey:"videoAppointment",title:"Appointment",children:!1===y&&(0,j.jsx)(I,{videoCallData:f})})})})})}),(0,j.jsx)(o.Z,{xl:3,xs:12,className:"h-100 mb-3",children:(0,j.jsx)(l.Z,{className:"tele-consultation-accordion",children:(0,j.jsxs)(l.Z.Body,{className:"mx-3",children:[(0,j.jsxs)(r.Z,{defaultActiveKey:"0",children:[(0,j.jsxs)(r.Z.Item,{eventKey:"0",className:"my-3",children:[(0,j.jsx)(r.Z.Header,{children:(0,j.jsx)("h5",{className:"mb-0",children:"Past Medical History"})}),(0,j.jsx)(r.Z.Body,{className:"py-4",children:null!==b&&void 0!==b&&null!==(c=b.patientHistory)&&void 0!==c&&c.pastMedicalHistory?null===b||void 0===b||null===(h=b.patientHistory)||void 0===h?void 0:h.pastMedicalHistory:"N/A"})]}),(0,j.jsxs)(r.Z.Item,{eventKey:"1",className:"my-3",children:[(0,j.jsx)(r.Z.Header,{children:(0,j.jsx)("h5",{className:"mb-0",children:"Current Medications"})}),(0,j.jsx)(r.Z.Body,{className:"py-4",children:null!==b&&void 0!==b&&null!==(p=b.patientHistory)&&void 0!==p&&p.currentMedical?null===b||void 0===b||null===(u=b.patientHistory)||void 0===u?void 0:u.currentMedical:"N/A"})]}),(0,j.jsxs)(r.Z.Item,{eventKey:"2",className:"my-3",children:[(0,j.jsx)(r.Z.Header,{children:(0,j.jsx)("h5",{className:"mb-0",children:"Allergy (to any medication)"})}),(0,j.jsx)(r.Z.Body,{className:"py-4",children:null!==b&&void 0!==b&&null!==(m=b.patientHistory)&&void 0!==m&&m.allergyHistory?null===b||void 0===b||null===(v=b.patientHistory)||void 0===v?void 0:v.allergyHistory:"N/A"})]})]}),(0,j.jsxs)("div",{className:"current-pharmacy-detials p-3",children:[(0,j.jsx)("h5",{className:"mb-0",children:"Current Pharmacy Name & Address"}),(0,j.jsx)("p",{style:{fontSize:"16px",color:"#999999",fontWeight:400},className:"mb-0 mt-1",children:null!==g&&void 0!==g&&g.pharmacyName?null===g||void 0===g?void 0:g.pharmacyName:"N/A"}),(0,j.jsx)("p",{style:{fontSize:"16px",color:"#999999",fontWeight:400},className:"mb-0 mt-1",children:null!==g&&void 0!==g&&g.pharmacyLocation?null===g||void 0===g?void 0:g.pharmacyLocation:"N/A"}),(0,j.jsx)("p",{style:{fontSize:"16px",color:"#999999",fontWeight:400},className:"mb-0 mt-1",children:null!==g&&void 0!==g&&g.country?null===g||void 0===g?void 0:g.country:"N/A"})]})]})})})]})})}}}]);
//# sourceMappingURL=3395.1f8118cc.chunk.js.map