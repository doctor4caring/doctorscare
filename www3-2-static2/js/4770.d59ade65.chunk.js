"use strict";(self.webpackChunkfamily_doc_app=self.webpackChunkfamily_doc_app||[]).push([[4770],{14045:(e,s,n)=>{n.d(s,{Z:()=>i});var o=n(88135),t=n(80184);function i(e){let{children:s,...n}=e;const{handleClose:i,show:l,title:a,className:r}=n;return(0,t.jsx)("div",{children:(0,t.jsxs)(o.Z,{show:l,onHide:i,className:r,backdrop:"static",children:[(0,t.jsx)(o.Z.Header,{className:"py-3",closeButton:!0,children:(0,t.jsx)(o.Z.Title,{className:"modalTitle",children:(0,t.jsx)("span",{className:"font-weight-600",children:a})})}),(0,t.jsx)(o.Z.Body,{children:s})]})})}},35100:(e,s,n)=>{n.d(s,{Z:()=>l});n(72791);var o=n(36638),t=n(7692),i=n(80184);function l(e){let{onChange:s,...n}=e;return(0,i.jsxs)("div",{className:"position-relative me-2",children:[(0,i.jsx)(o.Z.Control,{onChange:s,type:"text",placeholder:"Search",className:"search-field-spacing ".concat(n.className),"aria-label":"Search"}),(0,i.jsx)(t.Goc,{size:22,className:"searchbar-icon"})]})}},15626:(e,s,n)=>{n.d(s,{Z:()=>t});var o=n(72791);const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;const[s,n]=(0,o.useState)(""),t=(0,o.useRef)(null);return[s,(0,o.useCallback)((s=>{t.current&&clearTimeout(t.current),t.current=setTimeout((()=>{t.current=null,n(s.target.value)}),e)}),[e])]}},94770:(e,s,n)=>{n.r(s),n.d(s,{default:()=>D});var o=n(72791),t=n(95070),i=n(89743),l=n(2677),a=n(8116),r=n(57689),d=n(36638),c=n(43360),m=n(88135),u=n(11087),p=n(84373),x=n(59434),h=n(79243),v=n(84129),f=n(61134),j=n(14045),w=n(10857),N=n(3810),b=n(53392),g=n(65764),y=n(53473),C=n(9085),I=n(49739),A=n(73683),S=n(3063),Z=n(80184);const F=(0,y.J)("pk_live_51NS6LFJQrjlyogPP8wq3kFDFZOprir0PwWPucUF7VCc9WxEb2uAs6lDskTBrnzHK349ConYGh6zVQtYSpAUFfjuj00ttYrBE4D");function P(e){const s=JSON.parse(localStorage.getItem("family_doc_app")),{handleClose:n,show:t,patientForm:i}=e,[l,a]=(0,o.useState)(!1),d=(0,x.I0)(),c=(0,r.s0)();function m(){c(N.m.PATIENT_PRESCRIPTION_FORMS);d((0,h.LB)({Search:""}))}const u=()=>{n(),a(!1);const s={...e.formData};d((0,S.zy)({formSubmit:s,onCreateSuccess:m}))};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(C.Ix,{}),(0,Z.jsx)(j.Z,{handleClose:n,show:t,title:"Checkout",className:"modal-stripe",backdrop:"static",children:(0,Z.jsx)(g.Elements,{stripe:F,children:(0,Z.jsx)(T,{isLoading:l,setIsLoading:a,newCoachHire:function(e){let n={patientStripeCustomerId:null===s||void 0===s?void 0:s.patientStripeCustomerId,stripeToken:e,formFee:null===i||void 0===i?void 0:i.formFee,patientId:null===s||void 0===s?void 0:s.userId,formId:null===i||void 0===i?void 0:i.formId,patientFormAttempt:(null===i||void 0===i?void 0:i.patientFormAttempt)+1};d((0,S.oB)({finalData:n,moveToNext:u}))},patientForm:i})})})]})}const k=()=>{const e=function(){const e=()=>window.innerWidth<450?"16px":"18px",[s,n]=(0,o.useState)(e);return(0,o.useEffect)((()=>{const s=()=>{n(e())};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}})),s}();return(0,o.useMemo)((()=>({style:{base:{fontSize:e,color:"#424770",letterSpacing:"0.025em",fontFamily:"Source Code Pro, monospace","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}})),[e])},T=e=>{var s;let{isLoading:n,setIsLoading:o,newCoachHire:t,patientForm:i}=e;const l=(0,g.useStripe)(),a=(0,g.useElements)(),r=k(),d=null===i||void 0===i||null===(s=i.formFee)||void 0===s?void 0:s.toFixed(2);return(0,Z.jsxs)("div",{className:"py-2 stripe",children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)(b.Z,{children:"Prescription Fee"}),(0,Z.jsx)("input",{type:"text",value:"\u20ac".concat(d||"N/A"),disabled:!0,className:"mt-0 w-100"})]}),(0,Z.jsxs)("form",{onSubmit:async e=>{if(o(!0),e.preventDefault(),l&&a)try{var s;const e=a.getElement(g.CardNumberElement),o=await l.createToken(e);var n;if(o.error)throw new Error(null===o||void 0===o||null===(n=o.error)||void 0===n?void 0:n.message);const i=null===o||void 0===o||null===(s=o.token)||void 0===s?void 0:s.id;i&&t(i)}catch(i){(0,A.P_)(null===i||void 0===i?void 0:i.message,"error"),o(!1)}},children:[(0,Z.jsxs)("div",{children:["Card number",(0,Z.jsx)(g.CardNumberElement,{options:r})]}),(0,Z.jsxs)("div",{children:["Expiration date",(0,Z.jsx)(g.CardExpiryElement,{options:r})]}),(0,Z.jsxs)("div",{children:["CVC",(0,Z.jsx)(g.CardCvcElement,{options:r})]}),(0,Z.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,Z.jsx)(c.Z,{variant:"primary",className:"w-100 py-2 primary_bg",radius:"0px",type:"submit",disabled:n,children:n?(0,Z.jsx)(I.Z,{color:"white",size:25,className:"d-flex m-auto"}):"Confirm"})})]})]})};function L(e){let{...s}=e;const{show:n,handleClose:t,formData:i}=s,[l,a]=(0,o.useState)(!1),{adminOnlinePrescripionForm:d}=(0,x.v9)((e=>(null===e||void 0===e?void 0:e.onlinePrescriptionForm)||[])),m=(0,r.s0)();return(0,Z.jsxs)("div",{className:"AddSlot_modal",children:[(0,Z.jsx)(j.Z,{className:"modal-lg",handleClose:t,show:n,children:(0,Z.jsxs)("div",{className:"d-flex justify-content-center flex-column align-items-center text-center p-3",children:[(0,Z.jsx)("img",{src:w.Z.BUY_PLAN,alt:"purchase plan"}),(0,Z.jsx)("p",{className:"py-3",children:"We're excited to support your health journey! Please click \u2018Purchase Plan\u2019 to choose and purchase the plan that suits you best."}),(0,Z.jsxs)("div",{className:"d-flex justify-content-around gap-3",children:[(0,Z.jsx)(c.Z,{className:"block primary_bg",variant:"primary",type:"button",onClick:()=>{t(),a(!0)},children:"One-Time Payment"}),(0,Z.jsx)(c.Z,{className:"block primary_bg",variant:"primary",type:"button",onClick:()=>m(N.m.PATIENT_PURCHASE_PLANS),children:"Purchase Plan"})]})]})}),l&&(0,Z.jsx)(P,{formData:i,handleClose:()=>a(!1),show:l,patientForm:null===d||void 0===d?void 0:d.data})]})}const _=function(e){var s,n,a,j,w,b;let{diseaseId:g}=e;const[y,C]=(0,o.useState)({}),[A,F]=(0,o.useState)(!1),[P,k]=(0,o.useState)(!1),{handleSubmit:T}=(0,f.cI)(),_=(0,r.TH)(),[E,R]=(0,o.useState)([]),{remainingAptPresData:B}=(0,x.v9)((e=>null===e||void 0===e?void 0:e.doctorSchedule)),O=JSON.parse(localStorage.getItem("family_doc_app")),D=(0,x.I0)(),z=(0,r.s0)(),{adminOnlinePrescripionForm:q,isSuccess:M,isLoading:Q,isError:H}=(0,x.v9)((e=>(null===e||void 0===e?void 0:e.onlinePrescriptionForm)||[]));function U(e,s,n){let o,t=E.findIndex((s=>s.questionId===e.questionId));if(-1!==t){{let o=E[t].formAnswersList.findIndex((e=>e.formAnswereId===s));-1!==o?E[t].formAnswersList[o]=0==n?null:{formAnswereId:s,textAnswerValue:"TextBox"===(null===e||void 0===e?void 0:e.answerTypeName)?n:""}:"Radio"!==(null===e||void 0===e?void 0:e.answerTypeName)?E[t].formAnswersList.push({formAnswereId:n?s:null,textAnswerValue:"TextBox"===(null===e||void 0===e?void 0:e.answerTypeName)?n:""}):E[t].formAnswersList[0]={formAnswereId:n?s:null,textAnswerValue:"TextBox"===(null===e||void 0===e?void 0:e.answerTypeName)?n:""}}R(E.map((e=>({...e,formAnswersList:e.formAnswersList.filter((e=>null!==e))}))))}else{var i,l;o={fee:null===q||void 0===q||null===(i=q.data)||void 0===i?void 0:i.formFee,patientQuestionId:0,questionId:e.questionId,patientId:null===O||void 0===O?void 0:O.userId,formId:null===e||void 0===e?void 0:e.formId,patientFormAttempt:(null===_||void 0===_?void 0:_.state)+1,isOneTimePayment:null===B||void 0===B||null===(l=B.data)||void 0===l||!l.prescription,formAnswersList:[{formAnswereId:s,textAnswerValue:"TextBox"===(null===e||void 0===e?void 0:e.answerTypeName)?n:""}]};const t=[...E,o];R(t)}}function V(){z(N.m.PATIENT_PRESCRIPTION_FORMS);D((0,h.LB)({Search:""}))}function J(){var e,s;k(!0);const n={formQuestionList:null===E||void 0===E?void 0:E.map((e=>({...e,formAnswersList:e.formAnswersList.filter((e=>null!==e))})))};null!==B&&void 0!==B&&null!==(e=B.data)&&void 0!==e&&e.prescription&&!P?D((0,S.zy)({formSubmit:n,onCreateSuccess:V})):null!==B&&void 0!==B&&null!==(s=B.data)&&void 0!==s&&s.prescription||!P||(C(n),F(!0),k(!1))}return(0,o.useEffect)((()=>{const e={formId:g};D((0,h.Pw)(e))}),[D,g]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("nav",{"aria-label":"breadcrumb",children:(0,Z.jsxs)("ol",{className:"breadcrumb",children:[(0,Z.jsx)("li",{className:"breadcrumb-item",children:(0,Z.jsx)(u.rU,{to:"/patient/online-prescription-questionnaire",className:"text-decoration-none fs-5 color-99",children:"Prescription Forms"})}),(0,Z.jsx)(p.hjJ,{className:"mx-1 mt-2 color-99"}),(0,Z.jsx)("li",{className:"breadcrumb-item active fs-5","aria-current":"page",style:{color:"#000071"},children:null===q||void 0===q||null===(s=q.data)||void 0===s?void 0:s.title})]})}),(0,Z.jsx)(t.Z,{className:"shadow-sm mt-2",children:Q?(0,Z.jsx)(v.Z,{}):M?(0,Z.jsx)(d.Z,{onSubmit:T(J),children:(0,Z.jsxs)(i.Z,{className:"m-3 d-flex justify-content-center flex-column",children:[(0,Z.jsxs)(l.Z,{xl:7,lg:10,xs:12,className:"p-3 rounded mx-auto mb-3",style:{boxShadow:"0px 0px 24px 0px #0000000A",borderTop:"6px solid #000071"},children:[(0,Z.jsx)("h4",{className:"fw-bold",children:"Prescription Title"}),(0,Z.jsx)("p",{className:"m-0",style:{fontSize:"1.2rem"},children:null===q||void 0===q||null===(n=q.data)||void 0===n?void 0:n.title})]}),(null===q||void 0===q||null===(a=q.data)||void 0===a||null===(j=a.formQuestionList)||void 0===j?void 0:j.length)>0?null===q||void 0===q||null===(w=q.data)||void 0===w||null===(b=w.formQuestionList)||void 0===b?void 0:b.map(((e,s)=>(0,Z.jsx)(l.Z,{xl:7,lg:10,xs:12,className:"p-3 rounded mx-auto mb-3",style:{boxShadow:"0px 0px 24px 0px #0000000A",borderLeft:"6px solid #F26522"},children:(0,Z.jsxs)(d.Z.Group,{className:"mb-3",controlId:"formQuestion".concat(s),children:[(0,Z.jsxs)(d.Z.Label,{className:"label-primary mt-2",children:["Q.","".concat(s+1,".")," ",e.question,null!==e&&void 0!==e&&e.isRequired?(0,Z.jsxs)("span",{style:{color:"#FF3A3A"},className:"fw-bold",children:[" ","*"]}):null]}),401===(null===e||void 0===e?void 0:e.answerTypeId)?(0,Z.jsx)(Z.Fragment,{children:e.formAnswersList.map(((n,o)=>(0,Z.jsx)("div",{children:(0,Z.jsx)(d.Z.Check,{inline:!0,required:null===n||void 0===n?void 0:n.isRequired,label:n.answerLabel,name:"group".concat(s),type:"radio",id:"radio-".concat(s,"-").concat(o),"aria-label":"radio-".concat(s,"-").concat(o),onChange:s=>{U(e,n.formAnswereId,s.target.checked)}})},"radio-".concat(o))))}):404===(null===e||void 0===e?void 0:e.answerTypeId)?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(d.Z.Control,{as:"textarea",rows:3,placeholder:"Answer Text",className:"mt-2",required:null===e||void 0===e?void 0:e.isRequired,maxLength:250,onChange:s=>{U(e,e.formAnswersList[0].formAnswereId,s.target.value)}})}):402===(null===e||void 0===e?void 0:e.answerTypeId)?(0,Z.jsx)(Z.Fragment,{children:e.formAnswersList.map(((n,o)=>(0,Z.jsx)("div",{children:(0,Z.jsx)(d.Z.Check,{inline:!0,label:n.answerLabel,name:"group".concat(s),type:"checkbox",id:"checkbox-".concat(s,"-").concat(o),"aria-label":"checkbox-".concat(s,"-").concat(o),onChange:s=>{U(e,n.formAnswereId,s.target.checked)}})},"checkbox-".concat(o))))}):null]})},s))):(0,Z.jsx)(v.Z,{}),(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(c.Z,{className:"Admin-Add-btn fw-bold float-end ".concat(Q&&"disabled"),type:"submit",children:Q?(0,Z.jsx)(I.Z,{color:"white",size:25,className:"d-flex m-auto"}):"Proceed to Pay"})})]})}):H?(0,Z.jsx)("span",{className:"text-danger fst-italic",children:"Network Error"}):null}),(0,Z.jsx)(L,{formData:y,handleClose:()=>F(!1),show:A}),(0,Z.jsxs)(m.Z,{size:"lg",show:P,children:[(0,Z.jsx)(m.Z.Body,{className:"p-4",children:(0,Z.jsx)("p",{className:"fw-bold m-0",children:"Do you want to check the form and review before saving?"})}),(0,Z.jsxs)(m.Z.Footer,{className:"d-flex justify-content-center",children:[(0,Z.jsx)(c.Z,{onClick:J,className:"Admin-Modal-CancelBtn fw-bold",children:"No"}),(0,Z.jsx)(c.Z,{onClick:()=>k(!1),className:"Admin-Add-btn fw-bold",children:"Yes"})]})]})]})};const E=function(e){let{onClick:s,cards:n}=e;return(0,Z.jsx)("div",{className:"patient__prescription-forms px-3 py-3",children:null===n||void 0===n?void 0:n.map(((e,n)=>(0,Z.jsx)("div",{className:"patient__prescription-cards",onClick:()=>s(e.formId,e.title,e.patientFormAttempt),children:e.title},n)))})};var R=n(82962),B=n(15626),O=n(35100);function D(){const[e,s]=(0,o.useState)(1),[n,d]=(0,B.Z)(500),c=JSON.parse(localStorage.getItem("family_doc_app")),m=new URLSearchParams(window.location.search).get("diseaseId"),u=(0,r.s0)(),p=(0,x.I0)(),{getAllAdminOnlinePrescripionForm:f,isSuccess:j,isLoading:w,isError:b}=(0,x.v9)((e=>null===e||void 0===e?void 0:e.onlinePrescriptionForm));m?console.log("Disease Id:",m):console.log("Disease parameter not found in the URL");const g=12,y=e*g,C=y-g,I=e=>s(e);return(0,o.useEffect)((()=>{const s={Search:n||"",PageNo:e,Size:12};p((0,h.LB)(s))}),[n,e]),(0,Z.jsx)(Z.Fragment,{children:m?(0,Z.jsx)(_,{diseaseId:m}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("h5",{children:"Prescription Forms"}),(0,Z.jsx)(t.Z,{className:"shadow-sm mt-4",children:w?(0,Z.jsx)(v.Z,{}):j?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(l.Z,{xl:3,md:6,sm:6,xs:12,className:"mt-3 mx-3",children:(0,Z.jsx)(O.Z,{onChange:d,className:"me-2"})})}),(0,Z.jsx)(E,{cards:null===f||void 0===f?void 0:f.data,onClick:(e,s,n)=>((e,s,n)=>{u("".concat(N.m.PATIENT_PRESCRIPTION_FORMS,"?diseaseName=").concat(s.replace(/ /g,"-"),"&diseaseId=").concat(e),{state:n});const o={patientId:null===c||void 0===c?void 0:c.userId};p((0,R.lr)(o))})(e,s,n)}),(null===f||void 0===f?void 0:f.totalCounts)>0?(0,Z.jsxs)(a.Z,{className:"d-flex justify-content-between align-items-center px-3 patient__prescription-pagination",children:[(0,Z.jsx)(a.Z,{children:(A=C+1,S=y,F=null===f||void 0===f?void 0:f.totalCounts,(0,Z.jsxs)("span",{children:[A," to ",S," out of ",F," entries"]}))}),(0,Z.jsxs)("div",{className:"d-flex justify-content-between pagination__page-Number",children:[(0,Z.jsx)(a.Z.Prev,{onClick:()=>I(e-1),disabled:1===e}),Array.from({length:Math.ceil((null===f||void 0===f?void 0:f.totalCounts)/g)}).map(((s,n)=>0===n||n===Math.ceil((null===f||void 0===f?void 0:f.totalCounts)/g)-1||n>=e-2&&n<=e+2?(0,Z.jsx)(a.Z.Item,{active:e===n+1,onClick:()=>I(n+1),children:n+1},n+1):n===e-3&&e>4||n===e+3&&e<Math.ceil((null===f||void 0===f?void 0:f.totalCounts)/g)-3?(0,Z.jsx)(a.Z.Ellipsis,{},"ellipsis-".concat(n)):null)),(0,Z.jsx)(a.Z.Next,{onClick:()=>I(e+1),disabled:e===Math.ceil((null===f||void 0===f?void 0:f.totalCounts)/g)})]})]}):(0,Z.jsx)("p",{className:"record-message",children:"No Records to Display"})]}):b?(0,Z.jsx)("span",{className:"text-danger fst-italic",children:"Network Error"}):null})]})});var A,S,F}}}]);
//# sourceMappingURL=4770.d59ade65.chunk.js.map