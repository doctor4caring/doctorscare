"use strict";(self.webpackChunkfamily_doc_app=self.webpackChunkfamily_doc_app||[]).push([[3661],{52268:(e,o,i)=>{i.d(o,{Tf:()=>l,_Y:()=>d,bA:()=>t,df:()=>a,lt:()=>s,sP:()=>n});const t=[{lookupId:6,value:"Nurse"},{lookupId:7,value:"Receptionist"}],n=[{lookupId:101,value:"Male"},{lookupId:102,value:"Female"},{lookupId:103,value:"Other"}],l={Destroyed:"destroyed",Error:"error",Incoming:"incoming",Registered:"registered",Registering:"registering",TokenWillExpire:"tokenWillExpire",Unregistered:"unregistered"},s={Connected:"connected",Accept:"accept",Audio:"audio",Cancel:"cancel",Disconnect:"disconnect",Error:"error",Mute:"mute",Reconnected:"reconnected",Reconnecting:"reconnecting",Reject:"reject",Ringing:"ringing",Sample:"sample",Volume:"volume",WarningCleared:"warning-cleared",Warning:"warning"},d=[{lookupId:401,name:"Multiple Choice",value:"Radio"},{lookupId:402,name:"Checkbox",value:"Checkbox"},{lookupId:404,name:"Paragraph",value:"TextBox"}],a=[{lookupId:801,value:"1 Month"},{lookupId:802,value:"3 Months"},{lookupId:803,value:"6 Months"},{lookupId:804,value:"12 Months"}]},23661:(e,o,i)=>{i.r(o),i.d(o,{default:()=>I});var t=i(72791),n=i(95070),l=i(36638),s=i(89743),d=i(2677),a=i(43360),r=i(16856),c=i(30203),u=i(78820),p=i(61134),m=i(59434),v=i(7692),x=i(57689),h=i(3810),g=i(52268),f=i(79243),b=i(84129),j=i(80184);const I=function(){var e;const{handleSubmit:o,setValue:i,register:I}=(0,p.cI)(),[A,w]=(0,t.useState)("401"),[C,y]=(0,t.useState)([{questionId:"",question:"",options:[""],selectedType:"401",isActive:!0,isRequired:!0}]),[q,k]=(0,t.useState)(!1),{adminOnlinePrescripionForm:N,isLoading:T,isError:R,isSuccess:S}=(0,m.v9)((e=>null===e||void 0===e?void 0:e.onlinePrescriptionForm)),Z=(0,x.s0)(),F=(0,m.I0)(),L=JSON.parse(localStorage.getItem("family_doc_app"));let P=new URLSearchParams(window.location.search).get("disease");const E=()=>{y([...C,{questionId:"",question:"",options:[""],selectedType:"401",isActive:!0,isRequired:!0}])},Q=e=>{const o=[...C];o[e].options=[...C[e].options,""],y(o)},M=(e,o,i)=>{const t=[...C];t[e]={...t[e],options:t[e].options.map(((e,t)=>t===o?{...e,answerLabel:i}:e))},y(t)},_=(e,o)=>{const i=[...C];i[e]={...i[e],options:i[e].options.filter(((e,i)=>i!==o))},y(i)};function z(){const e={formId:P};F((0,f.Pw)(e))}function D(){1===(null===L||void 0===L?void 0:L.roleId)?Z(h.m.SUPERADMIN_FORMS):4===(null===L||void 0===L?void 0:L.roleId)&&Z(h.m.ADMIN_FORMS);F((0,f.LB)({Search:""}))}return(0,t.useEffect)((()=>{const e={formId:P};F((0,f.Pw)(e))}),[F,P]),(0,t.useEffect)((()=>{var e,o;P&&N&&(y([]),null===N||void 0===N||null===(e=N.data)||void 0===e||null===(o=e.formQuestionList)||void 0===o||o.map(((e,o)=>{var i;const t={title:null===N||void 0===N||null===(i=N.data)||void 0===i?void 0:i.title,questionId:e.questionId,question:e.question,options:e.formAnswersList,selectedType:e.answerTypeId.toString(),isActive:e.isActive,isRequired:e.isRequired};return y((e=>[...e,t]))})))}),[P,N]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h5",{children:"Questionnaires"}),(0,j.jsx)(n.Z,{className:"shadow-sm custom-questionnaires",children:T?(0,j.jsx)(b.Z,{}):S?(0,j.jsx)(l.Z,{onSubmit:o((function(e){var o,i,t;const n={formId:P?null===N||void 0===N||null===(o=N.data)||void 0===o?void 0:o.formId:0,title:null!==e&&void 0!==e&&e.title?null===e||void 0===e?void 0:e.title:null===N||void 0===N||null===(i=N.data)||void 0===i?void 0:i.title,isActive:!P||(null===N||void 0===N||null===(t=N.data)||void 0===t?void 0:t.isActive),formQuestionList:C.map(((e,o)=>{var i;return{questionId:null!==e&&void 0!==e&&e.questionId?null===e||void 0===e?void 0:e.questionId:0,question:null===e||void 0===e?void 0:e.question,answerTypeId:null===e||void 0===e?void 0:e.selectedType,questionOrder:o,isActive:null===e||void 0===e?void 0:e.isActive,isRequired:null===e||void 0===e?void 0:e.isRequired,answerTypeName:"401"===(null===e||void 0===e?void 0:e.selectedType)?"Radio":"402"===(null===e||void 0===e?void 0:e.selectedType)?"Checkbox":"404"===(null===e||void 0===e?void 0:e.selectedType)?"TextBox":"",formId:P?null===N||void 0===N||null===(i=N.data)||void 0===i?void 0:i.formId:0,formAnswersList:e.options.map(((e,o)=>({formAnswereId:null!==e&&void 0!==e&&e.formAnswereId?null===e||void 0===e?void 0:e.formAnswereId:0,formQuestionId:null!==e&&void 0!==e&&e.formQuestionId?null===e||void 0===e?void 0:e.formQuestionId:0,answerLabel:null!==e&&void 0!==e&&e.answerLabel?null===e||void 0===e?void 0:e.answerLabel:"Answer Text"})))}}))};F((0,f.mh)({finalData:n,onCreateSuccess:D}))})),children:(0,j.jsxs)(s.Z,{className:"m-3 d-flex justify-content-center flex-column",children:[(0,j.jsxs)(d.Z,{xl:7,lg:10,xs:12,className:"mx-auto mb-3 p-0",children:[(0,j.jsxs)(l.Z.Group,{className:"px-3 pt-2 pb-4 rounded mb-3",controlId:"formTitle",style:{boxShadow:"0px 0px 24px 0px #0000000A",borderTop:"6px solid #000071"},children:[(0,j.jsxs)(l.Z.Label,{className:"mt-2 fw-bold",style:{fontSize:"1.5rem"},children:[q?"Enter ":"","Prescription Title"]}),(0,j.jsx)(l.Z.Control,{type:"text",className:"bg-transparent",placeholder:"Prescription Title",maxLength:250,name:"title",onChange:e=>i("title",e.target.value),disabled:P&&!q,defaultValue:null===N||void 0===N||null===(e=N.data)||void 0===e?void 0:e.title})]}),0===(null===C||void 0===C?void 0:C.length)?(0,j.jsx)(a.Z,{variant:"primary",type:"button",className:"Admin-Add-btn px-3 float-end",onClick:E,children:(0,j.jsx)(c.wEH,{size:24})}):P&&!q?(0,j.jsxs)(a.Z,{variant:"primary",type:"button",className:"Admin-Add-btn px-3 float-end",onClick:()=>{k(!0)},children:[(0,j.jsx)(v.Hlf,{size:24})," Edit"]}):""]}),C.map(((e,o)=>(0,j.jsxs)(d.Z,{xl:7,lg:10,xs:12,className:"p-3 rounded mx-auto mb-3",style:{boxShadow:"0px 0px 24px 0px #0000000A",borderLeft:"6px solid #F26522"},children:[(0,j.jsxs)(l.Z.Group,{className:"mb-3",children:[(!P||q)&&(0,j.jsxs)("div",{className:"d-flex justify-content-between flex-wrap align-items-center custom-col-rev mb-2",children:[(0,j.jsxs)(l.Z.Label,{className:"text-w-full mb-0",children:["Q.","".concat(o+1,".")," Enter Question"]}),(0,j.jsx)(d.Z,{xl:5,sm:6,xs:12,children:(0,j.jsx)(l.Z.Select,{"aria-label":"Select Type",onChange:e=>{((e,o)=>{w(e.target.value);const i=[...C];i[o].selectedType=e.target.value,y(i)})(e,o)},defaultValue:(null===e||void 0===e?void 0:e.selectedType)||A,disabled:P&&(null===e||void 0===e?void 0:e.questionId),className:"bg-transparent",children:g._Y.map((e=>(0,j.jsx)("option",{value:null===e||void 0===e?void 0:e.lookupId,children:e.name})))})})]}),(0,j.jsx)(l.Z.Control,{type:"text",placeholder:"Question",maxLength:250,defaultValue:null===e||void 0===e?void 0:e.question,disabled:P&&!q,name:"questionText".concat(o),required:!0,onChange:e=>((e,o)=>{const i=[...C];i[e].question=o,y(i)})(o,e.target.value),className:"bg-transparent"}),(0,j.jsxs)("div",{className:"mt-2 questionnaires-option",children:["401"===(null===e||void 0===e?void 0:e.selectedType)&&(0,j.jsxs)(j.Fragment,{children:[e.options.map(((e,i)=>(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)(l.Z.Check,{label:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.Z.Control,{type:"text",placeholder:"Add option",className:"border-0 ms-2 bg-transparent",defaultValue:e.answerLabel,disabled:P&&!q,onChange:e=>M(o,i,e.target.value)})}),name:"group".concat(o),type:"radio",id:"radio-".concat(i),className:"d-flex align-items-center mb-1 w-100",disabled:!0}),!P&&(0,j.jsx)("span",{className:"mx-3",children:(0,j.jsx)(u.oHP,{size:18,onClick:()=>_(o,i)})})]},"radio-".concat(i)))),(!P||!(null!==e&&void 0!==e&&e.questionId))&&(0,j.jsx)("span",{className:"text-cursor-pointer text-decoration-underline",style:{color:"#3F8BFC",fontSize:"0.9em"},onClick:()=>Q(o),children:"Add another option"})]}),"404"===(null===e||void 0===e?void 0:e.selectedType)&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.Z.Control,{as:"textarea",rows:3,placeholder:"Answer Text",className:"mt-2",disabled:!0})}),"402"===(null===e||void 0===e?void 0:e.selectedType)&&(0,j.jsxs)(j.Fragment,{children:[e.options.map(((e,i)=>(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)(l.Z.Check,{label:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.Z.Control,{type:"text",placeholder:"Add option",className:"border-0 ms-2 bg-transparent",defaultValue:e.answerLabel,disabled:P&&!q,onChange:e=>M(o,i,e.target.value)})}),name:"group".concat(o),type:"checkbox",id:"checkbox-".concat(i),className:"d-flex align-items-center mb-1 w-100",disabled:!0}),!P&&(0,j.jsx)("span",{className:"mx-3",children:(0,j.jsx)(u.oHP,{size:18,onClick:()=>_(o,i)})})]},"checkbox-".concat(i)))),(!P||!(null!==e&&void 0!==e&&e.questionId))&&(0,j.jsx)("span",{className:"text-cursor-pointer text-decoration-underline",style:{color:"#3F8BFC",fontSize:"0.9em"},onClick:()=>Q(o),children:"Add another option"})]})]})]}),(0,j.jsxs)("div",{className:"w-100 d-flex flex-wrap justify-content-end",children:[(!P||P&&q)&&(0,j.jsxs)(j.Fragment,{children:[o===C.length-1&&(0,j.jsx)("span",{style:{borderRight:"1px solid #CACACA"},children:(0,j.jsx)(c.wEH,{size:24,color:"#CACACA",className:"mx-2 text-cursor-pointer","data-toggle":"tooltip","data-placement":"top",title:"Add Question",onClick:E})}),(0,j.jsx)("span",{className:"me-2",style:{borderRight:"1px solid #CACACA"},children:(0,j.jsx)(r.I0,{size:26,color:"#CACACA",className:"mx-2 text-cursor-pointer","data-toggle":"tooltip","data-placement":"top",title:"Delete",onClick:()=>{if(P&&q&&null!==e&&void 0!==e&&e.questionId){var i;!function(e){let o={questionId:e};F((0,f.jQ)({finalData:o,getPresForm:z}))}(null===(i=e.options[o])||void 0===i?void 0:i.formQuestionId)}else(e=>{const o=[...C];o.splice(e,1),y(o)})(o)}})})]}),(0,j.jsx)(l.Z.Check,{type:"switch",id:"custom-switch-".concat(o),label:"Active",...I("isActive"),checked:!1!==(null===e||void 0===e?void 0:e.isActive),onChange:i=>{if(P&&q&&null!==e&&void 0!==e&&e.questionId){!function(e){let o={questionId:e};F((0,f.XB)({finalData:o,getPresForm:z}))}(e.questionId)}else((e,o)=>{console.log("Switch in section ".concat(e," is now ").concat(o));const i=[...C];i[e]={...i[e],isActive:o},y(i)})(o,i.target.checked)},disabled:P&&!q,className:"me-2"}),(0,j.jsx)(l.Z.Check,{type:"switch",id:"required-switch-".concat(o),label:"Required",...I("isRequired"),checked:!1!==(null===e||void 0===e?void 0:e.isRequired),onChange:i=>{if(P&&q&&null!==e&&void 0!==e&&e.questionId){!function(e){let o={questionId:e};F((0,f.xB)({finalData:o,getPresForm:z}))}(e.questionId)}else((e,o)=>{console.log("Required in section ".concat(e," is now ").concat(o));const i=[...C];i[e]={...i[e],isRequired:o},y(i)})(o,i.target.checked)},disabled:P&&!q})]})]},o))),(0!==(null===C||void 0===C?void 0:C.length)&&!P||P&&q)&&(0,j.jsx)(d.Z,{children:(0,j.jsx)(a.Z,{variant:"primary",type:"submit",className:"Admin-Add-btn fw-bold float-end",children:"Save"})})]})}):R?(0,j.jsx)("span",{className:"text-danger fst-italic",children:"Network Error"}):null})]})}}}]);
//# sourceMappingURL=3661.d4ff64b2.chunk.js.map